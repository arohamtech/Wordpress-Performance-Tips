<article class="markdown-body entry-content container-lg" itemprop="text">
    <h1 dir="auto"><a id="user-content-wordpress-performance--development-tips" class="anchor" aria-hidden="true"
            href="#wordpress-performance--development-tips"><svg class="octicon octicon-link" viewBox="0 0 16 16"
                version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>WordPress: Performance &amp; Development tips</h1>
    <h2 dir="auto"><a id="user-content-contents" class="anchor" aria-hidden="true" href="#contents"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Contents</h2>
    <ul dir="auto">
        <li><a href="#wordpress-performance--development-tips">WordPress: Performance &amp; Development tips</a>
            <ul dir="auto">
                <li><a href="#contents">Contents</a></li>
                <li><a href="#introduction">Introduction</a></li>
                <li><a href="#system">System</a>
                    <ul dir="auto">
                        <li><a href="#operating-system">Operating system</a></li>
                        <li><a href="#http-daemon">HTTP Daemon</a>
                            <ul dir="auto">
                                <li><a href="#caching">Caching</a></li>
                                <li><a href="#http2--http3">HTTP/2 &amp; HTTP/3</a>
                                    <ul dir="auto">
                                        <li><a href="#nginx">NGINX</a></li>
                                        <li><a href="#apache-httpd">Apache HTTPd</a></li>
                                    </ul>
                                </li>
                                <li><a href="#http2-server-push">HTTP/2 Server Push</a>
                                    <ul dir="auto">
                                        <li><a href="#nginx-1">NGINX</a></li>
                                        <li><a href="#apache-httpd-1">Apache HTTPd</a></li>
                                    </ul>
                                </li>
                                <li><a href="#security">Security</a></li>
                            </ul>
                        </li>
                        <li><a href="#php-interpreter">PHP Interpreter</a>
                            <ul dir="auto">
                                <li><a href="#opcodes">Opcodes</a></li>
                            </ul>
                        </li>
                        <li><a href="#database">Database</a></li>
                        <li><a href="#redis">Redis</a></li>
                    </ul>
                </li>
                <li><a href="#wordpress">Wordpress</a>
                    <ul dir="auto">
                        <li><a href="#core">Core</a></li>
                        <li><a href="#extensionsthemes-add-ons">Extensions/Themes (Add-Ons)</a>
                            <ul dir="auto">
                                <li><a href="#cache-enabler--lscache--wp-rocket-paid-plugin">Cache Enabler / LSCache /
                                        WP Rocket (paid plugin)...</a></li>
                                <li><a href="#wps-cleaner--optimize-database-after-deleting-revisions--">WPS Cleaner /
                                        Optimize Database after Deleting Revisions / ....</a></li>
                                <li><a href="#woocommerce">WooCommerce</a></li>
                                <li><a href="#your-own-extensions">Your own extensions</a></li>
                            </ul>
                        </li>
                        <li><a href="#theme">Theme</a>
                            <ul dir="auto">
                                <li><a href="#set-up-a-vcs">Set up a VCS</a>
                                    <ul dir="auto">
                                        <li><a href="#manage-the-theme-as-a-submodule-git">Manage the theme as a
                                                submodule (Git)</a></li>
                                    </ul>
                                </li>
                                <li><a href="#optimize-the-code">Optimize the code</a>
                                    <ul dir="auto">
                                        <li><a href="#xdebug">Xdebug</a></li>
                                    </ul>
                                </li>
                                <li><a href="#various-smaller-optimizations">Various smaller optimizations</a>
                                    <ul dir="auto">
                                        <li><a href="#cache-language-files">Cache language files</a></li>
                                        <li><a href="#cache-menu-accesses">Cache menu accesses</a></li>
                                        <li><a href="#cache-various-other-things">Cache various other things</a></li>
                                    </ul>
                                </li>
                                <li><a href="#minify-your-css">Minify your CSS</a>
                                    <ul dir="auto">
                                        <li><a href="#scss-to-css-to-minified-css">SCSS to CSS to minified CSS</a>
                                            <ul dir="auto">
                                                <li><a href="#phpstorm-jetbrains-ides">PhpStorm (JetBrains IDEs)</a>
                                                </li>
                                                <li><a href="#windows">Windows</a></li>
                                                <li><a href="#unix-todo">Unix (TODO)</a></li>
                                                <li><a href="#should-you-version-control-all-this">Should you version
                                                        control all this?</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#recompress-your-images">Recompress your images</a>
                                    <ul dir="auto">
                                        <li><a href="#css-background-image">CSS background-image</a></li>
                                        <li><a href="#on-the-server">On the server</a></li>
                                        <li><a href="#locally">Locally</a></li>
                                    </ul>
                                </li>
                                <li><a href="#optimize-htmljscss">Optimize HTML/JS/CSS</a>
                                    <ul dir="auto">
                                        <li><a href="#cumulative-layout-shift">Cumulative Layout Shift</a></li>
                                        <li><a href="#lazy-load">Lazy Load</a></li>
                                        <li><a href="#preconnect">Preconnect</a></li>
                                    </ul>
                                </li>
                                <li><a href="#check-htmlcss">Check HTML/CSS</a></li>
                                <li><a href="#fontawesome-trimming">FontAwesome trimming</a></li>
                                <li><a href="#bootstrap-trimming">Bootstrap trimming</a></li>
                                <li><a href="#serve-locally-as-much-data-as-possible">Serve locally as much data as
                                        possible</a></li>
                                <li><a href="#font-splitting">Font splitting</a></li>
                            </ul>
                        </li>
                        <li><a href="#check-your-logs-for-404-queries">Check your logs for 404 queries</a></li>
                        <li><a href="#set-your-faviconico">Set your favicon.ico</a></li>
                    </ul>
                </li>
                <li><a href="#get-away-from-wordpress">Get away from WordPress</a></li>
                <li><a href="#other-non-perf-related-useful-things">Other (non perf-related) useful things</a>
                    <ul dir="auto">
                        <li><a href="#ssl">SSL</a></li>
                        <li><a href="#mailer-return-path">Mailer Return-Path</a></li>
                        <li><a href="#url-change">URL Change</a></li>
                        <li><a href="#wp-cli">WP CLI</a></li>
                        <li><a href="#bedrock">Bedrock</a></li>
                        <li><a href="#internationalizationlocalization">Internationalization+Localization</a>
                            <ul dir="auto">
                                <li><a href="#preparing-the-php-code-i18n">Preparing the PHP code (i18n)</a></li>
                                <li><a href="#translating-l10n">Translating (l10n)</a></li>
                                <li><a href="#warning">Warning</a></li>
                            </ul>
                        </li>
                        <li><a href="#database-backups">Database backups</a></li>
                        <li><a href="#preparing-for-php-upgrades">Preparing for PHP upgrades</a></li>
                        <li><a href="#serving-your-local-environment">Serving your local environment</a></li>
                        <li><a href="#fight-spam">Fight spam</a></li>
                        <li><a href="#sidebars">Sidebars</a></li>
                        <li><a href="#live-templates">Live Templates</a></li>
                        <li><a href="#stay-up-to-date">Stay up to date!</a></li>
                    </ul>
                </li>
                <li><a href="#creditsthanksnotes">Credits/Thanks/Notes</a></li>
                <li><a href="#something-else">Something else?</a></li>
            </ul>
        </li>
    </ul>
    <h2 dir="auto"><a id="user-content-introduction" class="anchor" aria-hidden="true" href="#introduction"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Introduction</h2>
    <p dir="auto">Each of the following points require some degree of experience, which is why if you're a beginner you
        shouldn't expect to
        go through all this list in a few hours or even days, as it could take more for an experienced sysadmin
        developer.</p>
    <p dir="auto">The three main aspects are:</p>
    <ul dir="auto">
        <li>Server: do not make the server do the same thing too many times for no reason</li>
        <li>Network: transfer only useful data and in an efficient way</li>
        <li>Client: the easier websites can be rendered, the quicker they'll be displayed</li>
    </ul>
    <p dir="auto">This document becoming quite long, I added a TOC at the top: GitHub can't read it (yet), so view it
        through an editor that can, like <a href="https://typora.io/" rel="nofollow">Typora</a> or <a
            href="https://calibre-ebook.com" rel="nofollow">Calibre</a>.</p>
    <h2 dir="auto"><a id="user-content-system" class="anchor" aria-hidden="true" href="#system"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>System</h2>
    <h3 dir="auto"><a id="user-content-operating-system" class="anchor" aria-hidden="true" href="#operating-system"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Operating system</h3>
    <p dir="auto">Maybe the most difficult thing to change... DO NOT USE A WINDOWS SERVER.</p>
    <p dir="auto">First, because you'll be limited in your choices, and second because of the performance.</p>
    <p dir="auto">Once you get a local webserver on a powerful Windows machine several times slower than on a small
        Linux VPS, you understand this quite well.</p>
    <p dir="auto">On top of that, Microsoft is stopping official support of PHP <a
            href="https://news-web.php.net/php.internals/110907" rel="nofollow">starting v8.0</a> (but builds are still
        available).</p>
    <p dir="auto">For Linux systems, just stay up-to-date.</p>
    <p dir="auto">On Debian and Ubuntu, <a href="https://deb.sury.org/" rel="nofollow">Ondřej Surý's repository</a> will
        always have the latest PHP, Nginx and Apache2 versions for Debian/Ubuntu releases that aren't completely
        outdated. If you use his repository, don't forget to <a href="https://www.patreon.com/oerdnj"
            rel="nofollow">give him a few bucks</a>.</p>
    <p dir="auto">On RHCE/CentOS (and Fedora too but you wouldn't put that on a server), <a
            href="https://rpms.remirepo.net/" rel="nofollow">Remi's RPM repository</a> is the way to go for recent
        releases (and here too you can donate to keep it alive, see the links in the website).</p>
    <p dir="auto">Containers and cloud environments are out of the scope of a big part of this gist, but Docker has <a
            href="https://hub.docker.com/_/php" rel="nofollow">official images</a> for <a
            href="https://github.com/docker-library/repo-info/tree/master/repos/php/remote">all PHP versions still
            receiving support</a> (right now, 7.3 to 8.0).</p>
    <p dir="auto">If you don't know anything about Linux you're in for a wild ride: good luck.</p>
    <h3 dir="auto"><a id="user-content-http-daemon" class="anchor" aria-hidden="true" href="#http-daemon"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>HTTP Daemon</h3>
    <p dir="auto">The second most difficult thing to change: Apache HTTPd is often the one installed by default, but
        it's not the fastest.</p>
    <p dir="auto">Try Nginx and/or OpenLiteSpeed, they have some benefits (one of which being caching: see below).</p>
    <p dir="auto">HTTP Daemons benchmark:</p>
    <ul dir="auto">
        <li><a href="https://blog.litespeedtech.com/2018/03/05/compare-openlitespeed-to-nginx-and-apache/"
                rel="nofollow">https://blog.litespeedtech.com/2018/03/05/compare-openlitespeed-to-nginx-and-apache/</a>
            (yes this is a biased one)</li>
    </ul>
    <p dir="auto">I should also mention the open source <a href="https://h2o.examp1e.net/" rel="nofollow">H2O</a> server
        by the Japanese company DeNA, which also has <a href="https://h2o.examp1e.net/" rel="nofollow">interesting
            benchmarks</a> and covers HTTP/1 to HTTP/3.</p>
    <h4 dir="auto"><a id="user-content-caching" class="anchor" aria-hidden="true" href="#caching"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Caching</h4>
    <p dir="auto">This part is especially important if you use builders (Divi, Elementor, ...) as they tend to destroy
        performance.</p>
    <p dir="auto">Caching at the HTTPD level allows for the fastest kind of cache (outside of CDNs).</p>
    <p dir="auto">Nginx and OpenLiteSpeed both offer some kind of HTTPD-based cache for queries using PHP, with possible
        invalidation from inside WordPress (on new post/comment, on post edit, ...) through plugins (respectively <a
            href="https://wordpress.org/plugins/nginx-helper/" rel="nofollow">Nginx Helper</a> and <a
            href="https://wordpress.org/plugins/litespeed-cache/" rel="nofollow">LiteSpeed Cache</a>).</p>
    <p dir="auto">With Nginx you'll need either Redis or the <a
            href="https://github.com/FRiCKLE/ngx_cache_purge">ngx_cache_purge</a> module: with the second one you'd
        better pick a nginx from a repository that also offers the module, if you don't want to have to recompile it
        manually at each Nginx update.
        To have some basic settings for WordPress (for instance, to exclude the cache for logged-in users), see this <a
            href="https://www.linuxbabe.com/nginx/setup-nginx-fastcgi-cache" rel="nofollow">LinuxBabe</a> article or
        this one <a href="https://wp-rocket.me/blog/cache-dynamic-content-wordpress/" rel="nofollow">at WP-Rocket</a>.
    </p>
    <p dir="auto">As cache is invalidated through plugins, it can be set to a pretty high value (you can start with
        48h).</p>
    <p dir="auto">Just don't forget to purge it manually if you change some elements (like the theme) outside of
        WordPress.</p>
    <p dir="auto">Be aware of a thing called "<a href="https://developer.wordpress.org/plugins/security/nonces/"
            rel="nofollow">nonces</a>" (temporary verification values): if some plugins use them outside of logged-in
        areas (look for instances of the <code>wp_create_nonce</code> function), then you should limit the cache to <a
            href="https://legacy.joshpress.net/wordpress-nonces-and-wordpress-caching/" rel="nofollow">10h or less</a>.
    </p>
    <p dir="auto">If your website outputs different HTML for the same page depending on one or more non-URI HTTP query
        headers (Accept-Language, DNT, User-Agent (like AMP pages), ...) you should include those variants in your
        fastcgi_cache_key setting, like here for mobile pages:</p>
    <div class="highlight highlight-source-nginx position-relative overflow-auto">
        <pre><span class="pl-k">set</span> <span class="pl-smi">$device</span> <span class="pl-s">"pc"</span>;
<span class="pl-k">if</span> (<span class="pl-smi">$http_user_agent</span> <span class="pl-sr">~*</span> <span class="pl-s">"Android .+ Mobile|\(iPhone|\(iPod|IEMobile|Android; Mobile; .+Firefox|Windows Phone"</span>) {
	<span class="pl-k">set</span> <span class="pl-smi">$device</span> <span class="pl-s">"smart"</span>;
}
<span class="pl-k">fastcgi_cache_key</span>    <span class="pl-s">"<span class="pl-smi">$device</span>:<span class="pl-smi">$request_method</span>:<span class="pl-smi">$scheme</span>://<span class="pl-smi">$host$request_uri</span>"</span>;</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="set $device &quot;pc&quot;;
if ($http_user_agent ~* &quot;Android .+ Mobile|\(iPhone|\(iPod|IEMobile|Android; Mobile; .+Firefox|Windows Phone&quot;) {
	set $device &quot;smart&quot;;
}
fastcgi_cache_key    &quot;$device:$request_method:$scheme://$host$request_uri&quot;;" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">(this example is from the KUSANAGI-bundled Nginx default host configuration)</p>
    <p dir="auto">If you use <a href="https://wordpress.org/plugins/polylang/" rel="nofollow">Polylang</a>, <a
            href="https://wordpress.org/support/topic/nginx-fastcgi_cache-and-polylang-homepage-redirect/"
            rel="nofollow">only cache</a> HTTP 200 responses to avoid caching language redirects:</p>
    <div class="highlight highlight-source-nginx position-relative overflow-auto">
        <pre><span class="pl-k">fastcgi_cache_valid</span> <span class="pl-s">200</span> <span class="pl-c1">10h</span>;</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="fastcgi_cache_valid 200 10h;"
                tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">As it's a form of cache, let's mention CDNs here: they could also work as a (D)DoS mitigation tool.
        Choosing the best one depends on the features you want, the price you're willing to pay and the performance you
        wish for your particular location: on <a href="https://www.cdnperf.com/" rel="nofollow">cdnperf.com</a> you can
        compare them on a specific continent.</p>
    <h4 dir="auto"><a id="user-content-http2--http3" class="anchor" aria-hidden="true" href="#http2--http3"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>HTTP/2 &amp; HTTP/3</h4>
    <p dir="auto">If you can and if it's not already done, enable HTTP/2 on your webserver (note that it requires HTTPS
        to be active).</p>
    <p dir="auto">It will give a way better speed especially if many files are served at once.</p>
    <p dir="auto">I suggest you to look at the <a href="https://www.nginx.com/blog/7-tips-for-faster-http2-performance/"
            rel="nofollow">7 Tips for Faster HTTP/2 Performance</a> blog page over at NGINX to better understand how to
        adapt your code to it.</p>
    <p dir="auto">You can also prepare for HTTP/3 if you have OpenLiteSpeed, for even higher theoretical gains
        (out-of-the-box support in browsers is at <a href="https://caniuse.com/http3" rel="nofollow">0%</a> at the
        moment, but it can be enabled manually in Firefox/Chrome/Safari).</p>
    <h5 dir="auto"><a id="user-content-nginx" class="anchor" aria-hidden="true" href="#nginx"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>NGINX</h5>
    <div class="highlight highlight-source-nginx position-relative overflow-auto">
        <pre><span class="pl-k">server</span> {
        <span class="pl-k">listen</span>       <span class="pl-s">443</span> ssl http2;</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="server {
        listen       443 ssl http2;" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <h5 dir="auto"><a id="user-content-apache-httpd" class="anchor" aria-hidden="true" href="#apache-httpd"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Apache HTTPd</h5>
    <p dir="auto">Install/enable the mod_http2 module depending on your OS/distribution tools (<code>a2enmod
            http2</code> on Debian) and then configure the VHost like this:</p>
    <div class="highlight highlight-source-apache-config position-relative overflow-auto">
        <pre>&lt;<span class="pl-ent">VirtualHost</span> *:443&gt;
        Protocols h2 http/1.1</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="<VirtualHost *:443>
        Protocols h2 http/1.1" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <h4 dir="auto"><a id="user-content-http2-server-push" class="anchor" aria-hidden="true"
            href="#http2-server-push"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
                height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>HTTP/2 Server Push</h4>
    <p dir="auto">NGINX's <a href="https://www.nginx.com/blog/nginx-1-13-9-http2-server-push/"
            rel="nofollow">implementation</a> starting version 1.13.9, as well as the <a
            href="https://httpd.apache.org/docs/2.4/howto/http2.html#push" rel="nofollow">http2 module for Apache
            HTTPd</a> 2.4, both support <a href="https://en.wikipedia.org/wiki/HTTP/2_Server_Push" rel="nofollow">HTTP/2
            Server Push</a>, that you can take advantage in various ways to <a
            href="https://blog.cloudflare.com/using-http-2-server-push-with-php/#effectofserverpush"
            rel="nofollow">serve the website quicker</a>.
        This is an optimization best suited for the end of a theme development lifecycle, when the chain of element
        dependencies is fully known.</p>
    <p dir="auto">On the application side, you have to add HTTP Link headers like this:</p>
    <div class="highlight highlight-text-html-php position-relative overflow-auto">
        <pre><span class="pl-en">header</span>(<span class="pl-s">"Link: &lt;{$image_path}&gt;; rel=preload; as=image"</span>, <span class="pl-c1">false</span>);</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w"
                value="header(&quot;Link: <{$image_path}>; rel=preload; as=image&quot;, false);" tabindex="0"
                role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">The "as" resource type list can be found <a
            href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-as" rel="nofollow">at MDN</a>.</p>
    <p dir="auto">Another (long) article I'd recommend:</p>
    <ul dir="auto">
        <li><a href="https://www.smashingmagazine.com/2017/04/guide-http2-server-push/" rel="nofollow">A Comprehensive
                Guide To HTTP/2 Server Push - Smashing Magazine</a></li>
    </ul>
    <h5 dir="auto"><a id="user-content-nginx-1" class="anchor" aria-hidden="true" href="#nginx-1"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>NGINX</h5>
    <div class="highlight highlight-source-nginx position-relative overflow-auto">
        <pre><span class="pl-k">location</span> <span class="pl-en">= /path </span>{
    <span class="pl-k">http2_push_preload</span> on;</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="location = /path {
    http2_push_preload on;" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <h5 dir="auto"><a id="user-content-apache-httpd-1" class="anchor" aria-hidden="true" href="#apache-httpd-1"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Apache HTTPd</h5>
    <p dir="auto">No need to configure anything, the <a
            href="https://httpd.apache.org/docs/2.4/mod/mod_http2.html#h2push" rel="nofollow">H2Push Directive</a> is
        enabled by default.</p>
    <h4 dir="auto"><a id="user-content-security" class="anchor" aria-hidden="true" href="#security"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Security</h4>
    <p dir="auto">This is not strictly related to performance and benefits all cases (not just WordPress).</p>
    <p dir="auto">You can add a layer of security in the HTTP daemon by using a WAF module:</p>
    <ul dir="auto">
        <li>Apache HTTPd: <a href="https://modsecurity.org/" rel="nofollow">ModSecurity</a></li>
        <li>nginx: <a href="https://github.com/nbs-system/naxsi">NAXSI</a> + wordpress.rules file from <a
                href="https://github.com/nbs-system/naxsi-rules">naxsi-rules</a></li>
    </ul>
    <p dir="auto">Some hosting providers have them in their hosting packages, sometimes under another name (to make
        clients think they did everything themselves).</p>
    <h3 dir="auto"><a id="user-content-php-interpreter" class="anchor" aria-hidden="true" href="#php-interpreter"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>PHP Interpreter</h3>
    <p dir="auto">If it's not already done, use PHP 7.3 or higher.</p>
    <p dir="auto">At the date of writing, any version prior to this one is not being <a
            href="https://www.php.net/supported-versions.php" rel="nofollow">supported</a> anymore anyway.</p>
    <p dir="auto">Just by migrating from PHP 5.6 to 7.3 you can expect to serve 3 times more queries at the same time:
    </p>
    <ul dir="auto">
        <li><a href="https://kinsta.com/blog/php-benchmarks/#wordpress-5-3-benchmarks"
                rel="nofollow">https://kinsta.com/blog/php-benchmarks/#wordpress-5-3-benchmarks</a></li>
    </ul>
    <p dir="auto">There are repositories to backport recent PHP versions to older distributions like Debian 9 or CentOS
        7, and by taking advantage of PHP-FPM you can even get multiple versions of PHP running in parallel, to
        progressively test and migrate your hosted websites.</p>
    <p dir="auto"><a href="https://www.php.net/releases/8.0/en.php" rel="nofollow">PHP 8.0</a>, supported in WordPress
        5.6+, <a href="https://kinsta.com/blog/php-8/#jit" rel="nofollow">integrates a JIT compiler</a>, which should
        allow for even greater gains with time (the gains are "only" ~5% for WordPress as of v8.0 compared to v7.4).</p>
    <p dir="auto">When upgrading the codebase for a new version of PHP, the website <a href="https://php.watch/"
            rel="nofollow">php.watch</a> lists all changes you need to know.</p>
    <h4 dir="auto"><a id="user-content-opcodes" class="anchor" aria-hidden="true" href="#opcodes"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Opcodes</h4>
    <p dir="auto">PHP7 enables opcode caching by default, but you can speed it up by storing the opcodes on the disk (to
        avoid losing them at service restart).</p>
    <p dir="auto">My own settings, for reference only (always <a
            href="https://www.php.net/manual/en/opcache.configuration.php" rel="nofollow">read the docs</a>) :</p>
    <div class="highlight highlight-source-ini position-relative overflow-auto">
        <pre><span class="pl-k">zend_extension</span>=opcache.so
<span class="pl-k">opcache.enable</span>=1
<span class="pl-k">opcache.enable_cli</span>=0
<span class="pl-k">opcache.memory_consumption</span>=192
<span class="pl-k">opcache.interned_strings_buffer</span>=16
<span class="pl-k">opcache.max_accelerated_files</span>=16000
<span class="pl-k">opcache.revalidate_freq</span>=10
<span class="pl-k">opcache.fast_shutdown</span>=1
<span class="pl-k">opcache.file_cache</span>=/path/to/persistent/.opcache</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="zend_extension=opcache.so
opcache.enable=1
opcache.enable_cli=0
opcache.memory_consumption=192
opcache.interned_strings_buffer=16
opcache.max_accelerated_files=16000
opcache.revalidate_freq=10
opcache.fast_shutdown=1
opcache.file_cache=/path/to/persistent/.opcache" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <h3 dir="auto"><a id="user-content-database" class="anchor" aria-hidden="true" href="#database"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Database</h3>
    <p dir="auto">WordPress only supports MySQL/MariaDB for the time being.</p>
    <p dir="auto">Use the MySQL Tuner script to help you adjust your server variables, after checking the effect they
        would produce:</p>
    <ul dir="auto">
        <li><a href="https://github.com/major/MySQLTuner-perl/">https://github.com/major/MySQLTuner-perl/</a></li>
    </ul>
    <p dir="auto">You can put a mysqloptimize task in your crontab (every week or so) to make sure tables won't get too
        fragmented
        (of course this advice has way less value if you have your data on a SSD, but fragmented DB files will take a
        bit more space in system memory cache).</p>
    <p dir="auto">I cannot show you any example here, as good values will depend on your server and WordPress situations
        and may change over time.</p>
    <p dir="auto">One general advice would be to disable DNS resolution by removing hostnames from the mysql.user table,
        and unless you depend on external scripts creating users with a "localhost" host when deploying a new website,
        <a href="https://nixcp.com/skip-name-resolve/" rel="nofollow">adding skip-name-resolve</a> to the configuration
        file.
        In this case, make sure that:</p>
    <ol dir="auto">
        <li>The DB_HOST configuration variable in your wp-config.php file is set to 127.0.0.1 and not localhost</li>
        <li>The Host column in your mysql.user table for the WordPress DB user contains 127.0.0.1 and not localhost</li>
    </ol>
    <p dir="auto">(of course if your database is on another server, change accordingly)</p>
    <p dir="auto">Also, don't leave performance_schema always on: it has an <a
            href="https://engineering.linecorp.com/en/blog/mysql-research-performance-schema-instruments/"
            rel="nofollow">impact on performance</a>, besides using memory that would be better used for cache on
        servers with less RAM.</p>
    <p dir="auto">When troubleshooting for performance issues, enable the <a
            href="https://dev.mysql.com/doc/refman/8.0/en/slow-query-log.html" rel="nofollow">slow query log</a> with
        the option to detect queries not using indexes:</p>
    <div class="highlight highlight-source-ini position-relative overflow-auto">
        <pre><span class="pl-k">slow_query_log</span> = 1
<span class="pl-k">slow_query_log_file</span> = <span class="pl-s"><span class="pl-pds">"</span>/path/to/slow.log<span class="pl-pds">"</span></span>
<span class="pl-k">long_query_time</span> = 1.0
<span class="pl-k">log_queries_not_using_indexes</span> = 1</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="slow_query_log = 1
slow_query_log_file = &quot;/path/to/slow.log&quot;
long_query_time = 1.0
log_queries_not_using_indexes = 1" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">With the resulting data you can use "<a href="https://dev.mysql.com/doc/refman/8.0/en/explain.html"
            rel="nofollow">EXPLAIN</a> (bad query)" to try to find where the issue is (the theme, an extension, ...).
    </p>
    <p dir="auto">You can also do that from inside MySQL Workbench, with varying degrees of success and interface
        crashes.</p>
    <p dir="auto">If you're really serious, enable the <a href="https://dev.mysql.com/doc/refman/8.0/en/query-log.html"
            rel="nofollow">general_log</a> to log ALL queries done while you're accessing a problematic page, and
        process the result (with Perl/awk/Excel/...) to try to find what's up, especially to make a list of repeating
        queries.</p>
    <h3 dir="auto"><a id="user-content-redis" class="anchor" aria-hidden="true" href="#redis"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Redis</h3>
    <p dir="auto">If you have enough free memory on your dedicated server or can use a paid option with your hosting
        company, WordPress can use a <a href="https://redis.io/" rel="nofollow">Redis</a> caching service through
        plugins like <a href="https://wordpress.org/plugins/redis-cache/" rel="nofollow">Redis Object Cache</a>.</p>
    <p dir="auto">This would be especially useful for pages which bypass the HTTP daemon caching like those using
        sessions (logged-in user, WooCommerce, ...).</p>
    <p dir="auto">Before this section gets expanded, I'll link to one tutorial:</p>
    <ul dir="auto">
        <li><a href="https://wp-rocket.me/blog/redis-full-page-cache-vs-nginx-fastcgi/"
                rel="nofollow">https://wp-rocket.me/blog/redis-full-page-cache-vs-nginx-fastcgi/</a></li>
    </ul>
    <p dir="auto">In this case, if server memory is short it could be a viable option to reduce the DB memory cache in
        favor of the Redis one.</p>
    <p dir="auto">If using Redis Object Cache, follow <a
            href="https://github.com/rhubarbgroup/redis-cache/wiki/Connection-Parameters">these parameters</a> to access
        a different Redis database per accelerated website (thus, avoiding cache collisions), by putting in
        wp-config.php this setting:</p>
    <div class="highlight highlight-text-html-php position-relative overflow-auto">
        <pre><span class="pl-en">define</span>( <span class="pl-s">'WP_REDIS_DATABASE'</span>, <span class="pl-c1">0</span> ); <span class="pl-c">// Change the number for each different website</span></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w"
                value="define( 'WP_REDIS_DATABASE', 0 ); // Change the number for each different website" tabindex="0"
                role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <h2 dir="auto"><a id="user-content-wordpress" class="anchor" aria-hidden="true" href="#wordpress"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Wordpress</h2>
    <h3 dir="auto"><a id="user-content-core" class="anchor" aria-hidden="true" href="#core"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Core</h3>
    <p dir="auto">Don't touch WordPress's core files. If you want to change something there, push it upstream.</p>
    <h3 dir="auto"><a id="user-content-extensionsthemes-add-ons" class="anchor" aria-hidden="true"
            href="#extensionsthemes-add-ons"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Extensions/Themes (Add-Ons)</h3>
    <p dir="auto">The less add-ons the better, unless said add-ons are there to limit the work done by WordPress.</p>
    <p dir="auto">One way to control which plugins are loaded where is to use the <a
            href="https://wordpress.org/support/plugin/plugin-load-filter/reviews/" rel="nofollow">Plugin Load
            Filter</a> extension, but advanced matching through URL filtering (like for WooCommerce) is only possible
        with the <a href="https://celtislab.net/en/wp-plugin-load-filter-addon/" rel="nofollow">paid addon</a> ($44) and
        side effects of plugin filtering can be hard to predict, so thorough testing should be done.</p>
    <p dir="auto">Builders like Elementor or Divi can destroy a website's loading time, but this guide should give
        enough tips to mitigate this.
        Using the integrated Gutenberg editor instead would still be best performance-wise: see <a
            href="https://gist.github.com/Ruzgfpegk/1fd16dcdaeb4efbf16ca3b81d3c1a243">this other guide</a> by yours
        truly if you're planning on starting a new Gutenberg block without any prior knowledge.</p>
    <p dir="auto">"Cleanup" extensions can be enabled only when needed (why not through WP-CLI for cron'ed maintenance,
        if those extensions also extend WP-CLI).</p>
    <p dir="auto">Security-wise, even files from disabled add-ons can be "executed" from the Internet, so if they
        contain security issues you may be at risk.</p>
    <p dir="auto">WordPress 5.5+ allows automatic updates of extensions and themes, so (unless special cases, like
        add-ons function overrides from inside your theme) you should take advantage of this feature.</p>
    <p dir="auto">The WordFence plugin can scan your outdated add-ons against the <a href="https://wpvulndb.com/"
            rel="nofollow">WPScan Vulnerability Database</a>, to help you decide if keeping an older version for a while
        longer poses a threat or not.
        WordFence also integrates a WAF to block login bruteforce attempts which can take some CPU cycles, as cache is
        usually off with POST/GET requests or on important pages like wp-login.php or xmlrpc.php which are the ones used
        for bruteforce attacks.</p>
    <h4 dir="auto"><a id="user-content-cache-enabler--lscache--wp-rocket-paid-plugin" class="anchor" aria-hidden="true"
            href="#cache-enabler--lscache--wp-rocket-paid-plugin"><svg class="octicon octicon-link" viewBox="0 0 16 16"
                version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Cache Enabler / LSCache / WP Rocket (paid plugin)...</h4>
    <p dir="auto">Some extensions are there to cache generated pages, to avoid to have to "recompute" the whole
        WordPress infrastructure at each query.</p>
    <p dir="auto">Use them.</p>
    <h4 dir="auto"><a id="user-content-wps-cleaner--optimize-database-after-deleting-revisions--" class="anchor"
            aria-hidden="true" href="#wps-cleaner--optimize-database-after-deleting-revisions--"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>WPS Cleaner / Optimize Database after Deleting Revisions / ....</h4>
    <p dir="auto">The WordPress database has a bad habit of accumulating data that's probably useless to you.</p>
    <p dir="auto">Do some housekeeping from time to time (deleting old revisions for instance).</p>
    <p dir="auto">You can also limit old revisions from the beginning with a setting in the wp-config.php file (here
        with 5 revisions):</p>
    <div class="highlight highlight-text-html-php position-relative overflow-auto">
        <pre><span class="pl-en">define</span>( <span class="pl-s">'WP_POST_REVISIONS'</span>, <span class="pl-c1">5</span> );</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="define( 'WP_POST_REVISIONS', 5 );"
                tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">Or completely disable revisions if you know what you're doing:</p>
    <div class="highlight highlight-text-html-php position-relative overflow-auto">
        <pre><span class="pl-en">define</span>( <span class="pl-s">'WP_POST_REVISIONS'</span>, <span class="pl-c1">false</span> );</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="define( 'WP_POST_REVISIONS', false );"
                tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <h4 dir="auto"><a id="user-content-woocommerce" class="anchor" aria-hidden="true" href="#woocommerce"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>WooCommerce</h4>
    <p dir="auto">We talked about extensions that can speed up Wordpress, but there are also those... that slow it down.
    </p>
    <p dir="auto">WooCommerce is one of those, as it loads its files in every page even when it's not needed.</p>
    <p dir="auto">A "quick fix" can be found in this article by Neil Gowran on his website WP Beaches:</p>
    <ul dir="auto">
        <li><a href="https://wpbeaches.com/override-woocommerce-css-styles-conditionally/" rel="nofollow">Remove
                WooCommerce CSS Styles and Scripts From Pages That Don’t Need It</a></li>
    </ul>
    <div class="highlight highlight-text-html-php position-relative overflow-auto">
        <pre><span class="pl-en">add_action</span>( <span class="pl-s">'template_redirect'</span>, <span class="pl-s">'remove_woocommerce_styles_scripts'</span>, <span class="pl-c1">999</span> );

<span class="pl-k">function</span> <span class="pl-en">remove_woocommerce_styles_scripts</span>() {
	<span class="pl-k">if</span> ( <span class="pl-en">\function_exists</span>( <span class="pl-s">'is_woocommerce'</span> ) &amp;&amp; ! <span class="pl-en">is_woocommerce</span>() &amp;&amp; ! <span class="pl-en">is_cart</span>() &amp;&amp; ! <span class="pl-en">is_checkout</span>() ) {
		<span class="pl-en">remove_action</span>( <span class="pl-s">'wp_enqueue_scripts'</span>,      [ <span class="pl-v">WC_Frontend_Scripts</span>::class, <span class="pl-s">'load_scripts'</span> ] );
		<span class="pl-en">remove_action</span>( <span class="pl-s">'wp_print_scripts'</span>,        [ <span class="pl-v">WC_Frontend_Scripts</span>::class, <span class="pl-s">'localize_printed_scripts'</span> ], <span class="pl-c1">5</span> );
		<span class="pl-en">remove_action</span>( <span class="pl-s">'wp_print_footer_scripts'</span>, [ <span class="pl-v">WC_Frontend_Scripts</span>::class, <span class="pl-s">'localize_printed_scripts'</span> ], <span class="pl-c1">5</span> );
	}
}</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="add_action( 'template_redirect', 'remove_woocommerce_styles_scripts', 999 );

function remove_woocommerce_styles_scripts() {
	if ( \function_exists( 'is_woocommerce' ) &amp;&amp; ! is_woocommerce() &amp;&amp; ! is_cart() &amp;&amp; ! is_checkout() ) {
		remove_action( 'wp_enqueue_scripts',      [ WC_Frontend_Scripts::class, 'load_scripts' ] );
		remove_action( 'wp_print_scripts',        [ WC_Frontend_Scripts::class, 'localize_printed_scripts' ], 5 );
		remove_action( 'wp_print_footer_scripts', [ WC_Frontend_Scripts::class, 'localize_printed_scripts' ], 5 );
	}
}" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">Add this to your theme's functions.php and don't forget to add <code>use WC_Frontend_Scripts;</code>
        and to call the function using your namespace if you're using a custom namespace.</p>
    <p dir="auto">Sadly this doesn't remove styles and scripts added by WooCommerce plugins, but you already avoid (at
        time of writing) 15 HTTP queries and ~230Kb of data.</p>
    <p dir="auto">Once you've done this, I don't think there's a safe way to avoid all the additional SQL queries...
        this is where Redis could make a difference.</p>
    <h4 dir="auto"><a id="user-content-your-own-extensions" class="anchor" aria-hidden="true"
            href="#your-own-extensions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
                height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Your own extensions</h4>
    <p dir="auto">If you follow the <a href="https://developer.wordpress.org/plugins/" rel="nofollow">Plugin
            Handbook</a>, especially the "Plugin Security" part, I guess things should go well.</p>
    <p dir="auto">If your plugin uses custom tables (see the <a
            href="https://codex.wordpress.org/Creating_Tables_with_Plugins" rel="nofollow">relevant Codex article</a> to
        create them), be very careful to use indexes where it's needed (usually columns that will end up in a
        <code>WHERE columnName='something'</code>).</p>
    <p dir="auto">If you need raw SQL queries (like when using custom tables) with the <a
            href="https://developer.wordpress.org/reference/classes/wpdb/" rel="nofollow">global $wpdb</a>, prepared
        statements will be used everywhere except when using the <code>query()</code> method (in which case, <a
            href="https://developer.wordpress.org/reference/classes/wpdb/#protect-queries-against-sql-injection-attacks"
            rel="nofollow">prepare the statement</a> with the <code>prepare()</code> method).</p>
    <p dir="auto">If a plugin script is only made to be executed from the command-line, add a check such as this one
        at/near the beginning:</p>
    <div class="highlight highlight-text-html-php position-relative overflow-auto">
        <pre><span class="pl-k">if</span> ( <span class="pl-c1">PHP_SAPI</span> !== <span class="pl-s">'cli'</span> ) {
   <span class="pl-en">exit</span> ( <span class="pl-s">'This script is made to be executed from the command line only!'</span> );
}</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="if ( PHP_SAPI !== 'cli' ) {
   exit ( 'This script is made to be executed from the command line only!' );
}" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">If such a script only needs to access basic WordPress functions, you can load the bare minimum like
        this:</p>
    <div class="highlight highlight-text-html-php position-relative overflow-auto">
        <pre><span class="pl-en">define</span>( <span class="pl-s">'SHORTINIT'</span>, <span class="pl-c1">true</span> ); <span class="pl-c">// We only want to load base WordPress (see wp-settings.php)</span>
<span class="pl-k">require</span>( <span class="pl-s">'../../../wp-load.php'</span> ); <span class="pl-c">// To be able to use $wpdb, ABSPATH, ...</span></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="define( 'SHORTINIT', true ); // We only want to load base WordPress (see wp-settings.php)
require( '../../../wp-load.php' ); // To be able to use $wpdb, ABSPATH, ..." tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">...then add other <code>require()</code> from wp-settings.php as needed.</p>
    <h3 dir="auto"><a id="user-content-theme" class="anchor" aria-hidden="true" href="#theme"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Theme</h3>
    <h4 dir="auto"><a id="user-content-set-up-a-vcs" class="anchor" aria-hidden="true" href="#set-up-a-vcs"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Set up a VCS</h4>
    <p dir="auto">I can't make too many assumptions about who you are, what you know and your role in all this mess.
        It's possible that you never used any Version Control System to keep track of changes up to now, and if that's
        the case you should learn how they work and how to use them.
        Maybe you got access to the theme repository, in which case it would be a good idea to continue where your
        predecessors left off and keep using it.</p>
    <p dir="auto">IDEs usually have their own VCS support, and there are native tools (TortoiseGit, ...) that can do the
        job well too.</p>
    <p dir="auto">In the (probable) case you're using Git, here are some interesting resources:</p>
    <ul dir="auto">
        <li><a href="https://tom.preston-werner.com/2009/05/19/the-git-parable.html" rel="nofollow">The Git Parable</a>
            (metaphorical explanation on the inner Git workings, for beginners)</li>
        <li><a href="https://marklodato.github.io/visual-git-guide/index-en.html" rel="nofollow">A Visual Git
                Reference</a> (once you've understood the concepts, see how they translate to Git)</li>
        <li><a href="https://git-scm.com/book/en/v2" rel="nofollow">Pro Git</a> (maybe the closest thing to an official
            book)</li>
        <li><a href="https://www.jrebel.com/blog/git-cheat-sheet" rel="nofollow">JRebel Git Cheat Sheet</a> (to print
            and keep somewhere on your desk, PDF file at the bottom of the page)</li>
        <li><a href="https://www.conventionalcommits.org/en/v1.0.0/" rel="nofollow">Conventional Commits</a> (a
            tentative convention for commit messages) (<a
                href="https://gist.github.com/joshbuchea/6f47e86d2510bce28f8e7f42ae84c716">short summary</a>)</li>
    </ul>
    <p dir="auto">If you're using SVN, you can also convert the repository to Git with <code>git svn</code> or
        TortoiseGit's <code>Git Clone... / From SVN Repository</code>.</p>
    <h5 dir="auto"><a id="user-content-manage-the-theme-as-a-submodule-git" class="anchor" aria-hidden="true"
            href="#manage-the-theme-as-a-submodule-git"><svg class="octicon octicon-link" viewBox="0 0 16 16"
                version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Manage the theme as a submodule (Git)</h5>
    <p dir="auto">When using Git, you can specify that a folder is a "shortcut" to another repository, which allows to
        modularize development.
        With WordPress it can be one way to keep a deployment pipeline as clean as possible even if it comes with a few
        pitfalls (that you can read about <a href="https://medium.com/@porteneuve/mastering-git-submodules-34c65e940407"
            rel="nofollow">in this article</a>).</p>
    <p dir="auto">The short version of this <a
            href="https://docs.github.com/en/github/using-git/splitting-a-subfolder-out-into-a-new-repository">GitHub.com
            article</a>:</p>
    <div class="highlight highlight-source-shell position-relative overflow-auto">
        <pre><span class="pl-c"><span class="pl-c">#</span> Clone your existing project into a new folder</span>
$ git clone https://path/to/bigrepo.git
$ <span class="pl-c1">cd</span> bigrepo
<span class="pl-c"><span class="pl-c">#</span> Filter everything outside the theme and make it the new root</span>
$ git filter-branch --prune-empty --subdirectory-filter DocumentRoot/wp-content/themes/yourtheme -- --all
<span class="pl-c"><span class="pl-c">#</span> Switch the origin to the new empty theme repository and push</span>
$ git remote set-url origin https://path/to/themerepo.git
$ git push -u origin</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="# Clone your existing project into a new folder
$ git clone https://path/to/bigrepo.git
$ cd bigrepo
# Filter everything outside the theme and make it the new root
$ git filter-branch --prune-empty --subdirectory-filter DocumentRoot/wp-content/themes/yourtheme -- --all
# Switch the origin to the new empty theme repository and push
$ git remote set-url origin https://path/to/themerepo.git
$ git push -u origin" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">If you renamed your theme folder at some point, changes before the renames won't be carried over in
        the new history.
        Maybe for this kind of cases you'd better use the <a
            href="https://github.com/newren/git-filter-repo/">git-filter-repo</a> script (with the "--path-rename"
        option I guess?).</p>
    <p dir="auto">Now if you want to integrate this new repository inside the intact "big repo" you can delete the theme
        folder, commit, add the submodule (this will create a new .gitmodules file at the root of the project), and
        commit once again:</p>
    <div class="highlight highlight-source-shell position-relative overflow-auto">
        <pre><span class="pl-c"><span class="pl-c">#</span> Git delete the theme folder the way you want, then in the original repo folder:</span>
$ git commit -m <span class="pl-s"><span class="pl-pds">"</span>Removed folder for theme yourtheme<span class="pl-pds">"</span></span>
$ git submodule add https://path/to/themerepo.git DocumentRoot/wp-content/themes/yourtheme
$ git commit -m <span class="pl-s"><span class="pl-pds">"</span>Added submodule for theme yourtheme<span class="pl-pds">"</span></span>
$ git push</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="# Git delete the theme folder the way you want, then in the original repo folder:
$ git commit -m &quot;Removed folder for theme yourtheme&quot;
$ git submodule add https://path/to/themerepo.git DocumentRoot/wp-content/themes/yourtheme
$ git commit -m &quot;Added submodule for theme yourtheme&quot;
$ git push" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">Now all git operations related to the theme will have to be entered from its folder or a lower
        subfolder (committing at the project root level would only take the "big repo" code into account and not the
        theme one).
        IDEs usually take care of this, but don't forget that if you work on CLI or TortoiseGit.
        The master project will link the submodule folder to one of the submodule commits (the "<a
            href="https://en.wikibooks.org/wiki/Git/Submodules_and_Superprojects" rel="nofollow">super project</a>
        pointer"), so this is one other thing to be wary about: after committing the submodule, also commit the
        superproject to make sure it points to the latest committed version of the submodule.</p>
    <p dir="auto">If you don't want the pointer to have "<a
            href="https://stackoverflow.com/questions/41596529/what-is-a-dirty-submodule/41598706"
            rel="nofollow">dirty</a>" at the end of its name when there are untracked files (for instance), add this to
        the .gitmodules file at the root of the project, under the relevant [submodule] section:</p>
    <div class="highlight highlight-source-ini position-relative overflow-auto">
        <pre>	<span class="pl-k">ignore</span> = dirty</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="	ignore = dirty" tabindex="0"
                role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">And, or course, make sure that the git files (.git folder, .gitignore file, ...) are in the ignored
        list of files during deployment.</p>
    <h4 dir="auto"><a id="user-content-optimize-the-code" class="anchor" aria-hidden="true"
            href="#optimize-the-code"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
                height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Optimize the code</h4>
    <p dir="auto">You probably inherited a theme made by someone else.</p>
    <p dir="auto">This someone else was probably paid way better than you, for a horrible result.</p>
    <p dir="auto">Use the feedback provided by your IDE (Eclipse, PhpStorm, ...) and/or pipeline tools (PHPCS, PHPMD,
        ...).</p>
    <p dir="auto">Some may find it bad practice, but I prefer to set such tools locally as global packages for Composer:
        (after installing Composer) <a href="https://getcomposer.org/doc/00-intro.md#installation-windows"
            rel="nofollow">(Windows)</a></p>
    <p dir="auto">Here's my own usual list of packages typically used with WordPress projects, for reference:</p>
    <div class="highlight highlight-source-batchfile position-relative overflow-auto">
        <pre>composer global require squizlabs/php_codesniffer
composer global require automattic/phpcs-neutron-standard
composer global require automattic/phpcs-neutron-ruleset
composer global require dealerdirect/phpcodesniffer-composer-installer
composer global require phpmd/phpmd
composer global require phpstan/phpstan
composer global require szepeviktor/phpstan-wordpress
composer global require php-stubs/woocommerce-stubs</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="composer global require squizlabs/php_codesniffer
composer global require automattic/phpcs-neutron-standard
composer global require automattic/phpcs-neutron-ruleset
composer global require dealerdirect/phpcodesniffer-composer-installer
composer global require phpmd/phpmd
composer global require phpstan/phpstan
composer global require szepeviktor/phpstan-wordpress
composer global require php-stubs/woocommerce-stubs" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">Packages with then be stored in your local user folder (for Windows: %APPDATA%\Composer\vendor).</p>
    <p dir="auto">And don't forget to update both Composer and the packages from time to time:</p>
    <div class="highlight highlight-source-batchfile position-relative overflow-auto">
        <pre>composer global self-update
composer global update --optimize-autoloader</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="composer global self-update
composer global update --optimize-autoloader" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">Here's a sample <a href="https://phpstan.org/user-guide/getting-started" rel="nofollow">PHPStan</a>
        configuration file for WordPress you'd need to place at the root of your project (its default name being
        phpstan.neon), once the dependencies above are installed (%rootDir% below being the root folder of PHPStan, like
        "/path/to/vendor/phpstan/phpstan"):</p>
    <div class="highlight highlight-source-neon position-relative overflow-auto">
        <pre><span class="pl-ent">includes</span><span class="pl-k">:</span>
  <span class="pl-s">- phar://phpstan.phar/conf/bleedingEdge.neon</span>
  <span class="pl-s">- %rootDir%/../../szepeviktor/phpstan-wordpress/extension.neon</span>

<span class="pl-ent">parameters</span><span class="pl-k">:</span>
  <span class="pl-ent">level</span><span class="pl-k">:</span> <span class="pl-s">max</span>
  <span class="pl-ent">inferPrivatePropertyTypeFromConstructor</span><span class="pl-k">:</span> <span class="pl-c1">true</span>
  <span class="pl-ent">parallel</span><span class="pl-k">:</span>
    <span class="pl-ent">maximumNumberOfProcesses</span><span class="pl-k">:</span> <span class="pl-c1">4</span>
  
  <span class="pl-ent">scanDirectories</span><span class="pl-k">:</span>
    <span class="pl-s">- DocumentRoot/wp-content/themes/parent_theme_if_there_is_one</span>
    <span class="pl-s">- DocumentRoot/wp-content/plugins/plugin_used_by_the_theme</span>
  
  <span class="pl-ent">paths</span><span class="pl-k">:</span>
    <span class="pl-s">- DocumentRoot/wp-content/themes/theme_to_check</span>
  
  <span class="pl-ent">ignoreErrors</span><span class="pl-k">:</span>
    <span class="pl-en">- '#^Function apply_filters</span>(<span class="pl-s">_ref_array</span>)<span class="pl-s">? invoked with [34567</span>] <span class="pl-s">parameters</span>, <span class="pl-s">2 required\.$</span>#<span class="pl-s"><span class="pl-pds">'</span><span class="pl-ii"></span></span>
  
  <span class="pl-ent">bootstrapFiles</span><span class="pl-k">:</span>
    <span class="pl-c"><span class="pl-c">#</span> php-stubs/wordpress-stubs/wordpress-stubs.php is already loaded by szepeviktor/phpstan-wordpress</span>
    <span class="pl-c"><span class="pl-c">#</span> Uncomment the following as needed:</span>
    <span class="pl-c"><span class="pl-c">#</span>- %rootDir%/../../php-stubs/woocommerce-stubs/woocommerce-stubs.php</span>
    <span class="pl-c"><span class="pl-c">#</span>- %rootDir%/../../php-stubs/woocommerce-stubs/woocommerce-packages-stubs.php</span>

  <span class="pl-ent">excludes_analyse</span><span class="pl-k">:</span>
    <span class="pl-c"><span class="pl-c">#</span>- DocumentRoot/wp-content/themes/theme_to_check/folder_to_ignore</span></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="includes:
  - phar://phpstan.phar/conf/bleedingEdge.neon
  - %rootDir%/../../szepeviktor/phpstan-wordpress/extension.neon

parameters:
  level: max
  inferPrivatePropertyTypeFromConstructor: true
  parallel:
    maximumNumberOfProcesses: 4
  
  scanDirectories:
    - DocumentRoot/wp-content/themes/parent_theme_if_there_is_one
    - DocumentRoot/wp-content/plugins/plugin_used_by_the_theme
  
  paths:
    - DocumentRoot/wp-content/themes/theme_to_check
  
  ignoreErrors:
    - '#^Function apply_filters(_ref_array)? invoked with [34567] parameters, 2 required\.$#'
  
  bootstrapFiles:
    # php-stubs/wordpress-stubs/wordpress-stubs.php is already loaded by szepeviktor/phpstan-wordpress
    # Uncomment the following as needed:
    #- %rootDir%/../../php-stubs/woocommerce-stubs/woocommerce-stubs.php
    #- %rootDir%/../../php-stubs/woocommerce-stubs/woocommerce-packages-stubs.php

  excludes_analyse:
    #- DocumentRoot/wp-content/themes/theme_to_check/folder_to_ignore" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">You'd then launch the analyze from the console at the root of your folder by typing:</p>
    <div class="highlight highlight-source-batchfile position-relative overflow-auto">
        <pre><span class="pl-k">&gt;</span> phpstan analyse</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="> phpstan analyse" tabindex="0"
                role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">For JetBrains IDE users, the plugin <a
            href="https://plugins.jetbrains.com/plugin/7622-php-inspections-ea-extended-" rel="nofollow">Php Inspections
            (EA Extended)</a> or its paid variant <a
            href="https://plugins.jetbrains.com/plugin/10215-php-inspections-ea-ultimate-" rel="nofollow">Php
            Inspections (EA Ultimate)</a> can help a lot, on top of other inspectors, to clean up the code, for instance
        locating cases of</p>
    <div class="highlight highlight-text-html-php position-relative overflow-auto">
        <pre>for(
	<span class="pl-s1"><span class="pl-c1">$</span>i</span> = <span class="pl-c1">0</span>;
	<span class="pl-s1"><span class="pl-c1">$</span>i</span> &lt;= <span class="pl-en">slow_function_called_every_time_for_the_same_result</span>(); 
	<span class="pl-s1"><span class="pl-c1">$</span>i</span>++) { <span class="pl-en">stuff</span>(); }</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="for(
	$i = 0;
	$i <= slow_function_called_every_time_for_the_same_result(); 
	$i++) { stuff(); }" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">and helping you turn them into this:</p>
    <div class="highlight highlight-text-html-php position-relative overflow-auto">
        <pre><span class="pl-s1"><span class="pl-c1">$</span>target</span> = <span class="pl-en">slow_function_only_called_once</span>();
for( <span class="pl-s1"><span class="pl-c1">$</span>i</span> = <span class="pl-c1">0</span>; <span class="pl-s1"><span class="pl-c1">$</span>i</span> &lt;= <span class="pl-s1"><span class="pl-c1">$</span>target</span>; <span class="pl-s1"><span class="pl-c1">$</span>i</span>++) { <span class="pl-en">stuff</span>(); }</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="$target = slow_function_only_called_once();
for( $i = 0; $i <= $target; $i++) { stuff(); }" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">The static analyzers PHPStan and <a href="https://psalm.dev/" rel="nofollow">Psalm</a> are supported
        natively in PhpStorm 2020.3 and up (Psalm also has <a
            href="https://packagist.org/packages/humanmade/psalm-plugin-wordpress" rel="nofollow">WordPress
            support</a>).</p>
    <p dir="auto">If the website got slower with time, there are chances that there's a weird O(n^2) loop somewhere.</p>
    <p dir="auto">Beware of multilingual plugins like qTranslate X (which is abandoned by the way), especially when used
        in conjunction with search tools.</p>
    <p dir="auto">Get a decent knowledge of the <a href="https://developer.wordpress.org/reference/"
            rel="nofollow">various WordPress functions</a>, are they can be used in completely backwards ways by people
        who don't read the docs beyond the first result.</p>
    <p dir="auto">Limit function calls: if functions like get_stylesheet_directory_uri() are called at each resource
        path in a page, put their values in variables and use those instead.
        You could declare them in functions.php and set them as global:</p>
    <div class="highlight highlight-text-html-php position-relative overflow-auto">
        <pre><span class="pl-k">global</span> <span class="pl-s1"><span class="pl-c1">$</span>templateDirectoryUri</span>, <span class="pl-s1"><span class="pl-c1">$</span>stylesheetDirectoryUri</span>;
<span class="pl-s1"><span class="pl-c1">$</span>templateDirectoryUri</span>   = <span class="pl-en">get_template_directory_uri</span>();   <span class="pl-c">// Parent theme path if applicable, "normal" if not</span>
<span class="pl-s1"><span class="pl-c1">$</span>stylesheetDirectoryUri</span> = <span class="pl-en">get_stylesheet_directory_uri</span>(); <span class="pl-c">// Child theme path if applicable, "normal" if not</span></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="global $templateDirectoryUri, $stylesheetDirectoryUri;
$templateDirectoryUri   = get_template_directory_uri();   // Parent theme path if applicable, &quot;normal&quot; if not
$stylesheetDirectoryUri = get_stylesheet_directory_uri(); // Child theme path if applicable, &quot;normal&quot; if not"
                tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">And then in other theme files:</p>
    <div class="snippet-clipboard-content position-relative overflow-auto">
        <pre lang="php+HTML"><code>&lt;?php
global $templateDirectoryUri, $stylesheetDirectoryUri;
?&gt;
&lt;!-- [...] --&gt;
&lt;meta name="thumbnail" content="&lt;?= $stylesheetDirectoryUri ?&gt;/images/thumbnail-top.jpg" /&gt;
</code></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="<?php
global $templateDirectoryUri, $stylesheetDirectoryUri;
?>
<!-- [...] -->
<meta name=&quot;thumbnail&quot; content=&quot;<?= $stylesheetDirectoryUri ?>/images/thumbnail-top.jpg&quot; />"
                tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto"><a href="https://phptherightway.com/" rel="nofollow">PHP: The Right Way</a> is a good resource on how
        to produce "modern" PHP, and if you delve in more serious coding (especially when writing plugins) it may be a
        good idea to brush up on your Design Patterns knowledge with <a
            href="https://designpatternsphp.readthedocs.io/en/latest/README.html" rel="nofollow">DesignPatternsPHP</a>.
    </p>
    <p dir="auto">You can also check the compliance of your theme against current WordPress standards by using the <a
            href="https://wordpress.org/plugins/theme-check/" rel="nofollow">Theme Check</a> plugin.</p>
    <h5 dir="auto"><a id="user-content-xdebug" class="anchor" aria-hidden="true" href="#xdebug"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Xdebug</h5>
    <p dir="auto">If you need to troubleshoot performance issues or application bugs, install <a
            href="https://xdebug.org/" rel="nofollow">Xdebug</a> on a server (preferably a test or development one) and
        set it up.</p>
    <p dir="auto">As always, <a href="https://xdebug.org/docs/all_settings" rel="nofollow">read the docs</a>. You may
        need to learn how to use it from inside your IDE.</p>
    <p dir="auto">My own usual settings are:</p>
    <div class="highlight highlight-source-ini position-relative overflow-auto">
        <pre><span class="pl-k">zend_extension</span> = xdebug.so
<span class="pl-k">xdebug.remote_enable</span> = On
<span class="pl-k">xdebug.remote_port</span> = 9000
<span class="pl-k">xdebug.profiler_enable</span> = off
<span class="pl-k">xdebug.profiler_enable_trigger</span> = On
<span class="pl-k">xdebug.profiler_enable_trigger_value</span> = YOUR_OWN_PROFILE_TRIGGER
<span class="pl-k">xdebug.profiler_output_name</span> = cachegrind.out.%t.%p
<span class="pl-k">xdebug.profiler_output_dir</span> = <span class="pl-s"><span class="pl-pds">"</span>/tmp<span class="pl-pds">"</span></span>
<span class="pl-k">xdebug.trace_enable_trigger</span> = On
<span class="pl-k">xdebug.trace_enable_trigger_value</span> = YOUR_OWN_TRACE_TRIGGER
<span class="pl-k">xdebug.trace_output_name</span> = trace.%H.%p
<span class="pl-k">xdebug.trace_output_dir</span> = <span class="pl-s"><span class="pl-pds">"</span>/tmp<span class="pl-pds">"</span></span>
<span class="pl-k">xdebug.show_local_vars</span>=0</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="zend_extension = xdebug.so
xdebug.remote_enable = On
xdebug.remote_port = 9000
xdebug.profiler_enable = off
xdebug.profiler_enable_trigger = On
xdebug.profiler_enable_trigger_value = YOUR_OWN_PROFILE_TRIGGER
xdebug.profiler_output_name = cachegrind.out.%t.%p
xdebug.profiler_output_dir = &quot;/tmp&quot;
xdebug.trace_enable_trigger = On
xdebug.trace_enable_trigger_value = YOUR_OWN_TRACE_TRIGGER
xdebug.trace_output_name = trace.%H.%p
xdebug.trace_output_dir = &quot;/tmp&quot;
xdebug.show_local_vars=0" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">Combine it with XDebug Helper <a
            href="https://addons.mozilla.org/en-GB/firefox/addon/xdebug-helper-for-firefox/" rel="nofollow">for
            Firefox</a> or <a
            href="https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc"
            rel="nofollow">for Chrome</a>, generate a trace and/or a profile, and analyze them.</p>
    <p dir="auto">A profile will lead you to the parts of the code taking the most time to execute (or being executed
        the most), and the trace will list everything that's being done for one query.</p>
    <p dir="auto">It may take time, but you can find some weird shit through this process.</p>
    <p dir="auto">The PhpStorm IDE is a good tool to analyze a profiling session, but it's not the only one.</p>
    <p dir="auto">Note that PhpStorm can <a href="https://www.jetbrains.com/help/phpstorm/configuring-xdebug.html"
            rel="nofollow">be integrated</a> with XDebug for real-time debugging if you're tired of using var_dump().
    </p>
    <p dir="auto">To examine traces made by XDebug, the cross-platform <a
            href="https://github.com/kuun/xdebug-trace-viewer">xdebug-trace-viewer</a> tool can be used (you just have
        to use xdebug.trace_format=1).</p>
    <h4 dir="auto"><a id="user-content-various-smaller-optimizations" class="anchor" aria-hidden="true"
            href="#various-smaller-optimizations"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Various smaller optimizations</h4>
    <h5 dir="auto"><a id="user-content-cache-language-files" class="anchor" aria-hidden="true"
            href="#cache-language-files"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
                height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Cache language files</h5>
    <p dir="auto">Put <a href="https://gist.github.com/soderlind/610a9b24dbf95a678c3e">this file</a> in your mu-plugins
        folder.</p>
    <p dir="auto">By default, WordPress parses MO (language) files each time. Which is stupid.</p>
    <p dir="auto">This small plugin caches the result in the database as transients, way faster to fetch and decode.</p>
    <p dir="auto">This is especially useful if you have a lot of localized text (WooCommerce, builders, ...), as you're
        essentially trading php::unpack and php::explode (to read MO files) for php::unserialize (to decode transients).
        In an example case, I went from ~168K function calls (to decode MOs) (MO-&gt;import_from_loader taking ~3,3s) to
        360 function calls taking 146ms (to unserialize the DB contents).
        On the memory side, for this example MO-&gt;import_from_loader took ~100 MB and php::unserialize ~73MB.</p>
    <p dir="auto">But this approach takes more space in the database, so this is another trade-off to keep in mind.</p>
    <h5 dir="auto"><a id="user-content-cache-menu-accesses" class="anchor" aria-hidden="true"
            href="#cache-menu-accesses"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
                height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Cache menu accesses</h5>
    <p dir="auto">If you use menus they're also recomputed each time, which can lead up to a lot of DB calls.</p>
    <p dir="auto">Follow <a href="https://generatewp.com/how-to-use-transients-to-speed-up-wordpress-menus/"
            rel="nofollow">this guide</a> to store them into transients in database for a given time.</p>
    <p dir="auto">I personally prefer the quick way, but do what's best for your case.</p>
    <h5 dir="auto"><a id="user-content-cache-various-other-things" class="anchor" aria-hidden="true"
            href="#cache-various-other-things"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Cache various other things</h5>
    <p dir="auto">Outside of menus, you may have other things you don't want to recompute each time.</p>
    <p dir="auto">Transients are once again the answer. This <a
            href="https://developer.wordpress.org/apis/handbook/transients/#complete-example" rel="nofollow">code
            example from the WP documentation</a> covers most use cases:</p>
    <div class="highlight highlight-text-html-php position-relative overflow-auto">
        <pre><span class="pl-c">// Get any existing copy of our transient data</span>
<span class="pl-k">if</span> ( <span class="pl-c1">false</span> === ( <span class="pl-s1"><span class="pl-c1">$</span>special_query_results</span> = <span class="pl-en">get_transient</span>( <span class="pl-s">'special_query_results'</span> ) ) ) {
    <span class="pl-c">// It wasn't there, so regenerate the data and save the transient</span>
    <span class="pl-s1"><span class="pl-c1">$</span>special_query_results</span> = <span class="pl-k">new</span> <span class="pl-v">WP_Query</span>( <span class="pl-s">'cat=5&amp;amp;order=random&amp;amp;tag=tech&amp;amp;post_meta_key=thumbnail'</span> );
    <span class="pl-en">set_transient</span>( <span class="pl-s">'special_query_results'</span>, <span class="pl-s1"><span class="pl-c1">$</span>special_query_results</span>, <span class="pl-c1">12</span> * <span class="pl-c1">HOUR_IN_SECONDS</span> );
}
<span class="pl-c">// Use the data like you would have normally...</span></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="// Get any existing copy of our transient data
if ( false === ( $special_query_results = get_transient( 'special_query_results' ) ) ) {
    // It wasn't there, so regenerate the data and save the transient
    $special_query_results = new WP_Query( 'cat=5&amp;amp;order=random&amp;amp;tag=tech&amp;amp;post_meta_key=thumbnail' );
    set_transient( 'special_query_results', $special_query_results, 12 * HOUR_IN_SECONDS );
}
// Use the data like you would have normally..." tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">To go a step further, instead of saving WordPress objects you can also save the pre-rendered HTML for
        a whole section if you know what you're doing (for instance, no translated text stored in there unless you put
        the user language in the transient name).</p>
    <p dir="auto">In this last case you'd use output buffering functions (<code>ob_start();</code>, echoing the output,
        then <code>$ob_saved = ob_get_clean();</code> ) as in the "Cache menu accesses" example above.</p>
    <h4 dir="auto"><a id="user-content-minify-your-css" class="anchor" aria-hidden="true" href="#minify-your-css"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Minify your CSS</h4>
    <p dir="auto">If you have a legacy CSS file, it can be easier to maintain once transformed into a SCSS file:</p>
    <ul dir="auto">
        <li><a href="https://www.css2scss.com/" rel="nofollow">https://www.css2scss.com/</a> (online converter)</li>
        <li><a href="https://github.com/ortic/css2scss">https://github.com/ortic/css2scss</a></li>
    </ul>
    <p dir="auto">The resulting SCSS file will then need to be passed to the SASS executable to produce a CSS file:</p>
    <ul dir="auto">
        <li><a href="https://sass-lang.com/" rel="nofollow">https://sass-lang.com/</a> (or <code>npm install -g
                sass</code>)</li>
    </ul>
    <p dir="auto">The SCSS -&gt; CSS -&gt; Minified CSS process can be automated with File Watchers in PhpStorm or
        assisted through scripts (see below).</p>
    <p dir="auto">SCSS can also be used to add modularity, splitting the SCSS files (like one to define variables,
        another for global rules, one for each type of content, ...).</p>
    <p dir="auto">But whether you use SCSS or not, the first step would be to add a CSS Minifier in your workflow.</p>
    <p dir="auto">The best Swiss Army Knife to do that is <a href="https://github.com/postcss/postcss">PostCSS</a>, as
        it has <a href="https://www.postcss.parts/" rel="nofollow">a shitton of addons</a>.</p>
    <p dir="auto">You'll need the npm command which is included in NodeJS, so <a href="https://nodejs.org"
            rel="nofollow">download/install it</a> first.</p>
    <p dir="auto">Quick install commands (globally, after npm is installed) of everything I personally use:</p>
    <div class="highlight highlight-source-shell position-relative overflow-auto">
        <pre><span class="pl-k">&gt;</span> npm install -g postcss-cli
<span class="pl-k">&gt;</span> npm install -g postcss-combine-media-query
<span class="pl-k">&gt;</span> npm install -g cssnano
<span class="pl-k">&gt;</span> npm install -g purgecss</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="> npm install -g postcss-cli
> npm install -g postcss-combine-media-query
> npm install -g cssnano
> npm install -g purgecss" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <ul dir="auto">
        <li><a href="https://github.com/postcss/postcss-cli">postcss-cli</a>: to use postcss via CLI</li>
        <li><a href="https://github.com/SassNinja/postcss-combine-media-query">postcss-combine-media-query</a>: to
            recombine at the end of the file all @media rules inside the CSS (having them inline is easier to manage in
            SCSS but the output is ugly)</li>
        <li><a href="https://cssnano.co/" rel="nofollow">cssnano</a>: to shrink the CSS as much as possible, using
            default rules</li>
        <li><a href="https://purgecss.com/CLI.html" rel="nofollow">purgecss</a>: command to remove from a CSS file the
            rules that weren't detected in manually saved html files (install <a
                href="https://github.com/FullHuman/postcss-purgecss">fullhuman/postcss-purgecss</a> if you want to
            integrate it to postcss, but I prefer doing that manually)</li>
    </ul>
    <p dir="auto">As a quick side note, don't forget to periodically update your packages with:</p>
    <div class="highlight highlight-source-shell position-relative overflow-auto">
        <pre><span class="pl-k">&gt;</span> npm update -g </pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="> npm update -g " tabindex="0"
                role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <h5 dir="auto"><a id="user-content-scss-to-css-to-minified-css" class="anchor" aria-hidden="true"
            href="#scss-to-css-to-minified-css"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>SCSS to CSS to minified CSS</h5>
    <h6 dir="auto"><a id="user-content-phpstorm-jetbrains-ides" class="anchor" aria-hidden="true"
            href="#phpstorm-jetbrains-ides"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>PhpStorm (JetBrains IDEs)</h6>
    <p dir="auto">A file watcher preset already exists for the SCSS to CSS process.</p>
    <p dir="auto">But you still need to make one for postcss.</p>
    <p dir="auto">As the packages are installed globally (profile-wide), the program path becomes (if using Windows,
        else adjust) (for Windows this folder should be added by NodeJS in the %PATH%, so only the command should be
        enough):</p>
    <p dir="auto"><code>C:\Users\(current user)\AppData\Roaming\npm\postcss</code></p>
    <p dir="auto">Arguments (the "combine media query" plugin being useful only in a few cases):</p>
    <p dir="auto"><code>--map --no-map --use postcss-combine-media-query --use cssnano --output
            $FileNameWithoutExtension$.min.css $FileName$</code></p>
    <p dir="auto">Output path to refresh: <code>$FileNameWithoutExtension$.min.css</code></p>
    <p dir="auto">Working directory: <code>$FileDir$</code></p>
    <p dir="auto">(note that if you use modular SCSS files, if you save a "child" file the main one will <a
            href="https://youtrack.jetbrains.com/issue/WEB-42904" rel="nofollow">only be recompiled starting 2020.2.2
            versions</a> so on older versions you'd have to add garbage like empty comments in the main SCSS to trigger
        the file watcher)</p>
    <h6 dir="auto"><a id="user-content-windows" class="anchor" aria-hidden="true" href="#windows"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Windows</h6>
    <p dir="auto">If you don't use JetBrains IDEs, you can also prepare a command-line script.</p>
    <p dir="auto">Windows version (.bat) :</p>
    <div class="highlight highlight-source-batchfile position-relative overflow-auto">
        <pre><span class="pl-k">@</span><span class="pl-k">ECHO</span> <span class="pl-k">OFF</span>

<span class="pl-c"><span class="pl-k">REM</span> Usage: SCSS_to_CSS_to_MINCSS.bat file.scss</span>
<span class="pl-c"><span class="pl-k">REM</span> (a drag-and-drop of the SCSS file over this script also works)</span>

<span class="pl-c"><span class="pl-k">REM</span> First install NodeJS ( https://nodejs.org/ )</span>
<span class="pl-c"><span class="pl-k">REM</span> Then install the SCSS/CSS tools in a terminal (as Admin):</span>
<span class="pl-c"><span class="pl-k">REM</span> <span class="pl-ii">&gt;</span> npm install -g sass postcss-cli postcss-combine-media-query cssnano</span>


<span class="pl-c"><span class="pl-k">REM</span> Batch parameters reference can be found in "CALL /?" or "FOR /?".</span>

<span class="pl-c"><span class="pl-k">REM</span> Go to path of the CSS file (first argument)</span>
<span class="pl-k">CD</span> /D <span class="pl-s"><span class="pl-pds">"</span><span class="pl-v">%~d1%~p1</span><span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-k">REM</span> Sass: set input to file.scss and output to file.css</span>
<span class="pl-k">CALL</span> sass <span class="pl-s"><span class="pl-pds">"</span><span class="pl-v">%1</span><span class="pl-pds">"</span></span>:<span class="pl-s"><span class="pl-pds">"</span><span class="pl-v">%~n1</span>.css<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-k">REM</span> PostCSS: Using the Combine Media Query and CSSnano extensions, generate a minified CSS with its map file (externally, not inside the CSS)</span>
<span class="pl-k">CALL</span> postcss --map --no-map --use postcss-combine-media-query --use cssnano --output <span class="pl-s"><span class="pl-pds">"</span><span class="pl-v">%~n1</span>.min.css<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-v">%~n1</span>.css<span class="pl-pds">"</span></span></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w"
                value="@ECHO OFF

REM Usage: SCSS_to_CSS_to_MINCSS.bat file.scss
REM (a drag-and-drop of the SCSS file over this script also works)

REM First install NodeJS ( https://nodejs.org/ )
REM Then install the SCSS/CSS tools in a terminal (as Admin):
REM > npm install -g sass postcss-cli postcss-combine-media-query cssnano


REM Batch parameters reference can be found in &quot;CALL /?&quot; or &quot;FOR /?&quot;.

REM Go to path of the CSS file (first argument)
CD /D &quot;%~d1%~p1&quot;

REM Sass: set input to file.scss and output to file.css
CALL sass &quot;%1&quot;:&quot;%~n1.css&quot;

REM PostCSS: Using the Combine Media Query and CSSnano extensions, generate a minified CSS with its map file (externally, not inside the CSS)
CALL postcss --map --no-map --use postcss-combine-media-query --use cssnano --output &quot;%~n1.min.css&quot; &quot;%~n1.css&quot;" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">Of course, as above, change it according to your needs.</p>
    <h6 dir="auto"><a id="user-content-unix-todo" class="anchor" aria-hidden="true" href="#unix-todo"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Unix (TODO)</h6>
    <p dir="auto">Unix version (.sh) :</p>
    <div class="highlight highlight-source-shell position-relative overflow-auto">
        <pre><span class="pl-c"><span class="pl-c">#!</span>/bin/env sh</span>
<span class="pl-c"><span class="pl-c">#</span> TODO</span></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="#!/bin/env sh
# TODO" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <h6 dir="auto"><a id="user-content-should-you-version-control-all-this" class="anchor" aria-hidden="true"
            href="#should-you-version-control-all-this"><svg class="octicon octicon-link" viewBox="0 0 16 16"
                version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Should you version control all this?</h6>
    <p dir="auto">You could, but it would be a waste of space.</p>
    <p dir="auto">A better way would be to ignore processed files while giving a way to quickly generate them outside
        File Watchers.</p>
    <p dir="auto">Let's say you have your scss files in the /css folder, you'd then ignore processed files like this in
        your .gitignore at the theme root:</p>
    <div class="snippet-clipboard-content position-relative overflow-auto">
        <pre><code>/css/*.css*
</code></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="/css/*.css*" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">...and would have those script entries in your composer.json (again, following the above examples):
    </p>
    <div class="highlight highlight-source-json position-relative overflow-auto">
        <pre>  <span class="pl-ent">"scripts"</span>: {
    <span class="pl-ent">"buildallcss"</span>: <span class="pl-s"><span class="pl-pds">"</span>sass --update css<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"minallcss"</span>: <span class="pl-s"><span class="pl-pds">"</span>postcss css --map --no-map --use postcss-combine-media-query --use cssnano --dir css --ext min.css<span class="pl-pds">"</span></span>
  }</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="  &quot;scripts&quot;: {
    &quot;buildallcss&quot;: &quot;sass --update css&quot;,
    &quot;minallcss&quot;: &quot;postcss css --map --no-map --use postcss-combine-media-query --use cssnano --dir css --ext min.css&quot;
  }" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">A new developer would then have to do "composer buildallcss &amp;&amp; composer minallcss" in the
        theme root to get them all back, or run it through the IDE's actions ("Run/Debug Configurations" in PhpStorm).
        In case File Watchers are part of the shared configuration in the VCS, only the first command would be needed as
        it would trigger the watchers for the second one.</p>
    <p dir="auto">An added bonus of the composer scripts is that they could be used in the deployment pipeline too.</p>
    <h4 dir="auto"><a id="user-content-recompress-your-images" class="anchor" aria-hidden="true"
            href="#recompress-your-images"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Recompress your images</h4>
    <p dir="auto">It's one of the simplest things to do.</p>
    <p dir="auto">For best results do that yourself, if possible from lossless source images (see below).</p>
    <p dir="auto">If a FullHD image is displayed with a size of 320x240, downsize it (while keeping the "twice the
        pixels" rule if Retina displays are targeted). <a href="https://wordpress.org/plugins/imsanity/"
            rel="nofollow">Imsanity</a> does the job well (as a light version of <a
            href="https://wordpress.org/plugins/ewww-image-optimizer/" rel="nofollow">EWWW Image Optimizer</a>).
        Use PNG for most logos, JPG ~85% for most of the rest.</p>
    <p dir="auto">I don't think you need me to know that, but still.</p>
    <p dir="auto">I'd advise you to integrate WebP in your workflow but at the moment its support is not universal,
        Apple only supporting it since Safari 14: its support is "only" <a href="https://caniuse.com/webp"
            rel="nofollow">93% worldwide</a> as of March 2021.</p>
    <p dir="auto">So you should replace the original <code>&lt;img&gt;</code> tag with this fallback in the form of a
        <code>&lt;picture&gt;</code> tag like this:</p>
    <div class="highlight highlight-text-html-basic position-relative overflow-auto">
        <pre><span class="pl-kos">&lt;</span><span class="pl-ent">picture</span><span class="pl-kos">&gt;</span>
    <span class="pl-kos">&lt;</span><span class="pl-ent">source</span> <span class="pl-c1">srcset</span>="<span class="pl-s">img/logo.avif</span>" <span class="pl-c1">type</span>="<span class="pl-s">image/avif</span>"<span class="pl-kos">&gt;</span>
    <span class="pl-kos">&lt;</span><span class="pl-ent">source</span> <span class="pl-c1">srcset</span>="<span class="pl-s">img/logo.webp</span>" <span class="pl-c1">type</span>="<span class="pl-s">image/webp</span>"<span class="pl-kos">&gt;</span>
    <span class="pl-kos">&lt;</span><span class="pl-ent">source</span> <span class="pl-c1">srcset</span>="<span class="pl-s">img/logo.png</span>" <span class="pl-c1">type</span>="<span class="pl-s">image/png</span>"<span class="pl-kos">&gt;</span> <span class="pl-c">&lt;!-- or type="image/jpeg" if JPG --&gt;</span>
    <span class="pl-kos">&lt;</span><span class="pl-ent">img</span> <span class="pl-c1">src</span>="<span class="pl-s">img/logo.png</span>" <span class="pl-c1">alt</span>="<span class="pl-s">Logo</span>"<span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;/</span><span class="pl-ent">picture</span><span class="pl-kos">&gt;</span></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="<picture>
    <source srcset=&quot;img/logo.avif&quot; type=&quot;image/avif&quot;>
    <source srcset=&quot;img/logo.webp&quot; type=&quot;image/webp&quot;>
    <source srcset=&quot;img/logo.png&quot; type=&quot;image/png&quot;> <!-- or type=&quot;image/jpeg&quot; if JPG -->
    <img src=&quot;img/logo.png&quot; alt=&quot;Logo&quot;>
</picture>" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">This way, browsers will look into each <code>&lt;source&gt;</code> and retrieve the first supported
        one, and if the user browser is too old to understand the <code>&lt;picture&gt;</code> tag then it will
        understand the fallback <code>&lt;img&gt;</code> tag (yeah, it's a fallback of a fallback).
        The last tag is more and more omitted.</p>
    <p dir="auto">You can also add a <a href="https://webpjs.appspot.com/" rel="nofollow">JS WebP decoder</a> instead...
        or <a href="https://github.com/chase-moskal/webp-hero">a polyfill</a>.</p>
    <p dir="auto">And if you want to be even more ahead of the curve, convert your images to <a
            href="https://jakearchibald.com/2020/avif-has-landed/" rel="nofollow">AVIF</a> (see below for the tools).
        Support for AVIF is <a href="https://caniuse.com/avif" rel="nofollow">very low right now</a> (25% worldwide as
        of March 2021) but should increase very soon (support is in Chrome since 2020/09 and will be enabled <a
            href="https://www.phoronix.com/scan.php?page=news_item&amp;px=Firefox-Enables-AVIF-Default"
            rel="nofollow">in Firefox starting 2021/03</a>, as usual Apple and Microsoft are lagging behind). There's
        also a <a href="https://github.com/Kagami/avif.js">polyfill for AVIF</a>.
        The source type for AVIF is "image/avif".</p>
    <p dir="auto">One drawback of those two formats is that they lack the "progressive" rendering of JPG (but
        progressive images use the CPU more...).
        It could come to AVIF one day (check this <a
            href="https://github.com/AOMediaCodec/av1-avif/issues/102">issue</a>), but in the meantime if this is an
        important feature for you then you should prepare the viewport with a CSS background (color or <a
            href="https://developer.mozilla.org/en-US/docs/Web/CSS/gradient" rel="nofollow">gradient</a>, image, ...) to
        visually ease the transition:</p>
    <div class="highlight highlight-source-css-scss position-relative overflow-auto">
        <pre><span class="pl-e">#logo_img_container</span> {
	<span class="pl-c1"><span class="pl-c1">background-color</span></span>: <span class="pl-v">$overall_color_of_the_photo</span>; <span class="pl-c"><span class="pl-c">//</span> Seen first</span>
	<span class="pl-c1"><span class="pl-c1">background-image</span></span>: <span class="pl-c1">url</span>(<span class="pl-s"><span class="pl-pds">'</span>../img/photo_low_quality.jpg<span class="pl-pds">'</span></span>); <span class="pl-c"><span class="pl-c">//</span> Seen second (before the normal &lt;img&gt; loads)</span>
	<span class="pl-c1"><span class="pl-c1">background-repeat</span></span>: <span class="pl-c1">no-repeat</span>;
	<span class="pl-c1"><span class="pl-c1">background-size</span></span>: <span class="pl-c1">cover</span>;
}</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="#logo_img_container {
	background-color: $overall_color_of_the_photo; // Seen first
	background-image: url('../img/photo_low_quality.jpg'); // Seen second (before the normal <img> loads)
	background-repeat: no-repeat;
	background-size: cover;
}" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">You should also check that your webserver recognizes the AVIF extension, because if not then some
        browsers (...Firefox) wouldn't try to display the AVIF file but instead download it.</p>
    <p dir="auto">For NGINX, either add an entry to mime.types (risky if overridden by an update), <a
            href="https://stackoverflow.com/questions/16789494/extending-default-nginx-mime-types-file/"
            rel="nofollow">add the type to your nginx.conf</a> (also risky) or add this to the VHost settings:</p>
    <div class="highlight highlight-source-nginx position-relative overflow-auto">
        <pre><span class="pl-k">server</span> {
	[...]
	<span class="pl-k">location</span> ~* <span class="pl-sr">\.avif$ </span>{
		<span class="pl-k">add_header</span> Content-Type image/avif;
	}</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="server {
	[...]
	location ~* \.avif$ {
		add_header Content-Type image/avif;
	}" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">For Apache HTTPd, in your VHost settings or a .htaccess file:</p>
    <div class="highlight highlight-source-apache-config position-relative overflow-auto">
        <pre><span class="pl-c1">AddType</span> image/avif avif</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="AddType image/avif avif" tabindex="0"
                role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">The image format war is just starting, with <a href="http://sneyers.info/jxl/" rel="nofollow">JPEG
            XL</a> and <a href="https://www.phoronix.com/scan.php?page=news_item&amp;px=Google-Experimental-WebP2"
            rel="nofollow">WebP v2</a> arriving soon (both can already be tested in <a href="https://squoosh.app/"
            rel="nofollow">Squoosh</a>).</p>
    <h6 dir="auto"><a id="user-content-css-background-image" class="anchor" aria-hidden="true"
            href="#css-background-image"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
                height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>CSS background-image</h6>
    <p dir="auto">This case is a bit of a pain. Outside of the fact that lazy loading doesn't work (unless you add <a
            href="https://web.dev/lazy-loading-images/#images-css" rel="nofollow">more JS</a>), you can only have one
        background-image property in a CSS selector.</p>
    <p dir="auto">If you're only interested in WebP, go to the <a href="https://modernizr.com/"
            rel="nofollow">Modernizr</a> website, select the WebP functionalities you want to check (webp and
        webp-lossless would be enough I guess), click BUILD on the upper right side and save the JS file in your theme.
    </p>
    <p dir="auto">If you want to check for AVIF, the functionality is in the project but not on the website so you'll
        have to do it yourself locally:</p>
    <ol dir="auto">
        <li>
            <p dir="auto">Clone the <a href="https://github.com/Modernizr/Modernizr">Modernizr repository</a>.</p>
        </li>
        <li>
            <p dir="auto">Go to the root directory and fetch the project dependencies:</p>
            <div class="highlight highlight-source-shell position-relative overflow-auto">
                <pre>$ npm install</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="$ npm install" tabindex="0"
                        role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
        </li>
        <li>
            <p dir="auto">Create a config file with the wished checks (let's call it "modernizr-media-config.json"):</p>
            <div class="highlight highlight-source-json position-relative overflow-auto">
                <pre>{
  <span class="pl-ent">"minify"</span>: <span class="pl-c1">true</span>,
  <span class="pl-ent">"options"</span>: [
    <span class="pl-s"><span class="pl-pds">"</span>setClasses<span class="pl-pds">"</span></span>
  ],
  <span class="pl-ent">"feature-detects"</span>: [
    <span class="pl-s"><span class="pl-pds">"</span>img/webp-lossless<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>img/webp<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>img/avif<span class="pl-pds">"</span></span>
  ]
}</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="{
  &quot;minify&quot;: true,
  &quot;options&quot;: [
    &quot;setClasses&quot;
  ],
  &quot;feature-detects&quot;: [
    &quot;img/webp-lossless&quot;,
    &quot;img/webp&quot;,
    &quot;img/avif&quot;
  ]
}" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
        </li>
        <li>
            <p dir="auto">Execute the generator:</p>
            <div class="snippet-clipboard-content position-relative overflow-auto">
                <pre><code>$ bin\modernizr -c modernizr-media-config.json
</code></pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w"
                        value="$ bin\modernizr -c modernizr-media-config.json" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
        </li>
        <li>
            <p dir="auto">Retrieve the modernizr.js file that has been created.</p>
        </li>
    </ol>
    <p dir="auto">Once it's done, import it along with other JS files in your functions.php with a relevant name:</p>
    <div class="highlight highlight-text-html-php position-relative overflow-auto">
        <pre><span class="pl-en">wp_enqueue_script</span>( <span class="pl-s">'modernizer-img'</span>, <span class="pl-en">get_stylesheet_directory_uri</span>() . <span class="pl-s">'/js/modernizr-img.min.js'</span> );</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w"
                value="wp_enqueue_script( 'modernizer-img', get_stylesheet_directory_uri() . '/js/modernizr-img.min.js' );"
                tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">Some classes should then be added (client-side) to the element (like "avif webp webp-lossless").</p>
    <p dir="auto">With this you can then override the CSS background-image property like this:</p>
    <div class="highlight highlight-source-css position-relative overflow-auto">
        <pre><span class="pl-c">/* Standard element with all properties and fallback image */</span>
.<span class="pl-c1">element</span> {
  <span class="pl-c1">color</span><span class="pl-kos">:</span> <span class="pl-pds"><span class="pl-kos">#</span>FFF</span>;
  <span class="pl-c1">background-image</span><span class="pl-kos">:</span> <span class="pl-en">url</span>(<span class="pl-s">"../img/logo.jpg"</span>);
  <span class="pl-c1">background-repeat</span><span class="pl-kos">:</span> no-repeat;
  <span class="pl-c1">background-position</span><span class="pl-kos">:</span> center center;
  <span class="pl-c1">background-size</span><span class="pl-kos">:</span> cover;
}

<span class="pl-c">/* Optimized selectors that can be set before or after the standard one */</span>
<span class="pl-c">/* They are more precise so their contents have more weight */</span>
<span class="pl-c">/* Their order will depend on the order of classes added to the html tag: later ones have more weight. */</span>

.<span class="pl-c1">webp</span> .<span class="pl-c1">element</span> {
  <span class="pl-c1">background-image</span><span class="pl-kos">:</span> <span class="pl-en">url</span>(<span class="pl-s">"../img/logo.webp"</span>);
}

.<span class="pl-c1">avif</span> .<span class="pl-c1">element</span> {
  <span class="pl-c1">background-image</span><span class="pl-kos">:</span> <span class="pl-en">url</span>(<span class="pl-s">"../img/logo.avif"</span>);
}</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="/* Standard element with all properties and fallback image */
.element {
  color: #FFF;
  background-image: url(&quot;../img/logo.jpg&quot;);
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
}

/* Optimized selectors that can be set before or after the standard one */
/* They are more precise so their contents have more weight */
/* Their order will depend on the order of classes added to the html tag: later ones have more weight. */

.webp .element {
  background-image: url(&quot;../img/logo.webp&quot;);
}

.avif .element {
  background-image: url(&quot;../img/logo.avif&quot;);
}" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">When you add the background-image directly into your HTML (&lt;div ... style="background-image:
        url(...)"&gt;), you can neither use lazy loading nor alternative formats.</p>
    <p dir="auto">Also, note that the images can only start to download once the corresponding CSS file is read so you
        might want to preload it first in your (while keeping in mind that it's <a
            href="https://caniuse.com/link-rel-preload" rel="nofollow">disabled by default in Firefox</a>):</p>
    <div class="snippet-clipboard-content position-relative overflow-auto">
        <pre lang="php+HTML"><code>&lt;link rel="preload" href="&lt;?= esc_url( $templateDirectoryUri ) ?&gt;/css/cssContainingBGImages.min.css" as="style"&gt;
</code></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w"
                value="<link rel=&quot;preload&quot; href=&quot;<?= esc_url( $templateDirectoryUri ) ?>/css/cssContainingBGImages.min.css&quot; as=&quot;style&quot;>"
                tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <h5 dir="auto"><a id="user-content-on-the-server" class="anchor" aria-hidden="true" href="#on-the-server"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>On the server</h5>
    <p dir="auto">Existing plugins for WordPress could do the job, with varying degrees of quality.</p>
    <p dir="auto">A good extension to do that is <a href="https://wordpress.org/plugins/webp-express/"
            rel="nofollow">WebP Express</a>, which can use a local cwebp encoder and supports Apache/OpenLiteSpeed/nginx
        (rewrite rules, as well as on-the-fly HTML rewriting to add the picture tag when appropriate).</p>
    <p dir="auto">If you have gigantic source images (you shouldn't), adjust max_execution_time in your PHP config or
        request_terminate_timeout in your PHP-FPM config (temporarily if doing a batch conversion).</p>
    <h5 dir="auto"><a id="user-content-locally" class="anchor" aria-hidden="true" href="#locally"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Locally</h5>
    <p dir="auto">Do not trust standard export features of Photoshop and the likes (they are, to stay polite, usually
        very bad), and always reprocess them afterwards.</p>
    <p dir="auto">A few applications exist.</p>
    <p dir="auto">To convert to WebP, you could use the multi-platform <a href="https://www.xnview.com/en/xnviewmp/"
            rel="nofollow">XnViewMP</a>'s File/Export... and tweak while you look at the output image quality and size:
        a good quality setting for one image may not be the best for another, and a lossless file could be lighter than
        a lossy file in some cases (usually files that would have been PNGs otherwise, like icons).</p>
    <p dir="auto">To convert to AVIF, you can use the in-browser <a href="https://squoosh.app/"
            rel="nofollow">Squoosh</a> tool (encoding is done locally in JS+WebAssembly) or the <a
            href="https://github.com/Kagami/go-avif">go-avif</a> encoder, and add a source tag as shown above.</p>
    <p dir="auto">For JPG and PNG files it's a bit different.</p>
    <p dir="auto">For Linux and MacOS, <a href="https://trimage.org/" rel="nofollow">Trimage</a> is a good way to
        quickly remove useless metadata and recompress (losslessly) using jpegoptim, optipng and pngcrush (<a
            href="https://github.com/Kilian/Trimage/blob/master/trimage/trimage.py#L367">commands in the source
            code</a>).</p>
    <p dir="auto">For all OSes, the compiled version of imagemin, <a
            href="https://github.com/imagemin/imagemin-app">imagemin-app</a>, may be the best choice to very quickly
        reduce the sizes of JPGs, PNGs and even GIFs (but it does so in a destructive manner, reducing PNG's color depth
        to 8-bit for instance).
        I haven't seen very good results for JPGs but maybe my files were "good enough" from the beginning.</p>
    <p dir="auto">The best results I had with PNG files were by running manually <a
            href="https://pmt.sourceforge.io/pngcrush/" rel="nofollow">Pngcrush</a> in CLI (Windows binaries <a
            href="https://sourceforge.net/projects/pmt/files/pngcrush-executables/1.8.11/" rel="nofollow">here</a>)
        (use/adapt the bat/sh files in <a href="https://github.com/Kjuly/pngcrush">this repo</a> for an easier time) but
        <a href="https://github.com/shssoichiro/oxipng">OxiPNG</a> (Rust rewrite of OptiPNG) is also included in Squoosh
        (mentioned earlier). Unless you reduce the palette, this should be a lossless operation.</p>
    <p dir="auto">As for SVGs, you can usually strip them of useless information with tools like <a
            href="https://jakearchibald.github.io/svgomg/" rel="nofollow">SVGOMG</a> (that you can also run locally, see
        instructions on the <a href="https://github.com/jakearchibald/svgomg/blob/master/README.md">project's
            README</a>).
        Sometimes you may have a SVG containing only binary image in base64... which look like this:</p>
    <div class="highlight highlight-text-xml position-relative overflow-auto">
        <pre>&lt;<span class="pl-ent">svg</span> <span class="pl-e">xmlns</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.w3.org/2000/svg<span class="pl-pds">"</span></span> <span class="pl-e">xmlns</span><span class="pl-e">:</span><span class="pl-e">xlink</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.w3.org/1999/xlink<span class="pl-pds">"</span></span> <span class="pl-e">width</span>=<span class="pl-s"><span class="pl-pds">"</span>63<span class="pl-pds">"</span></span> <span class="pl-e">height</span>=<span class="pl-s"><span class="pl-pds">"</span>400<span class="pl-pds">"</span></span> <span class="pl-e">viewBox</span>=<span class="pl-s"><span class="pl-pds">"</span>0 0 63 400<span class="pl-pds">"</span></span>&gt;
  &lt;<span class="pl-ent">image</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>example.svg<span class="pl-pds">"</span></span> <span class="pl-e">width</span>=<span class="pl-s"><span class="pl-pds">"</span>63<span class="pl-pds">"</span></span> <span class="pl-e">height</span>=<span class="pl-s"><span class="pl-pds">"</span>400<span class="pl-pds">"</span></span> <span class="pl-e">xlink</span><span class="pl-e">:</span><span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>data:img/png;base64,iVBORw0KGgoAAAANSU[...]II=<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">svg</span>&gt;</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; width=&quot;63&quot; height=&quot;400&quot; viewBox=&quot;0 0 63 400&quot;>
  <image id=&quot;example.svg&quot; width=&quot;63&quot; height=&quot;400&quot; xlink:href=&quot;data:img/png;base64,iVBORw0KGgoAAAANSU[...]II=&quot;/>
</svg>" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">In this case, it's a way better idea to extract the data: copy the string starting with "data:img" up
        to the end (here, "=") and paste it into a Chromium or Firefox-based browser's URL bar: the file that will be
        saved will be the "real" (and smaller) binary image.
        If said image is a PNG (like the example), you can optimize it further with Pngcrush or OxiPNG.</p>
    <p dir="auto">For GIFs, there's <a href="http://www.lcdf.org/gifsicle/" rel="nofollow">Gifsicle</a>'s optimization
        mode (-O1 to -O3) in batch mode (see the <a href="http://www.lcdf.org/gifsicle/man.html" rel="nofollow">man
            page</a>):</p>
    <div class="highlight highlight-source-shell position-relative overflow-auto">
        <pre>gifsicle --batch -O3 path/to/<span class="pl-k">*</span>.gif</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="gifsicle --batch -O3 path/to/*.gif"
                tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <h4 dir="auto"><a id="user-content-optimize-htmljscss" class="anchor" aria-hidden="true"
            href="#optimize-htmljscss"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
                height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Optimize HTML/JS/CSS</h4>
    <p dir="auto">Part of it can be done through WP Rocket or similar.</p>
    <p dir="auto">Use Google's lighthouse through <a href="https://web.dev/measure/" rel="nofollow">web.dev</a> to get
        various useful metrics.</p>
    <p dir="auto">The developer tools in the browser can show if something really slows down the rendering process.</p>
    <p dir="auto">If your CSS is still using the "old flexbox" (display: box) (which is always possible if it's an old
        theme), try to port it to the "new flexbox" instead (display: flex), which is <a
            href="https://developers.google.com/web/updates/2013/10/Flexbox-layout-isn-t-slow" rel="nofollow">twice
            faster</a>.</p>
    <p dir="auto">With the help of SCSS (see above) you can easily "modularize" your CSS and, from your theme, only
        include the parts that are relevant to the active page.
        A possible optimization would be to serve a monolithic CSS on HTTP/1.1 and modular CSS on HTTP/2 (but beware of
        the server caching!).</p>
    <p dir="auto">In case of @media queries the "base CSS" should be the mobile one, overloaded with @media for bigger
        versions, this way smaller devices would need to do less computation than the bigger ones, helping them to get a
        quicker rendering.</p>
    <p dir="auto">As for JS, many parts of jQuery were merged in one way or another into mainline JavaScript, so
        avoiding it is always a good idea.</p>
    <p dir="auto">If needed, JS files can be minified with Uglify-Js, supported natively in JetBrains IDEs:</p>
    <div class="highlight highlight-source-shell position-relative overflow-auto">
        <pre>npm install -g uglify-js</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="npm install -g uglify-js" tabindex="0"
                role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">You can take advantage of <a href="https://css-tricks.com/specifics-on-css-specificity/"
            rel="nofollow">CSS Specificity</a> ordering to reorganize your selectors in a way that shortens them and/or
        reduces the amount of "!important".</p>
    <p dir="auto">To sum it up, specificity is ordered like this in a CSS file (extra column with "1" on the left if
        it's in a HTML style attribute):</p>
    <div class="snippet-clipboard-content position-relative overflow-auto">
        <pre><code>[number of matching ids], [number of matching classes], [number of matching tags]
</code></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w"
                value="[number of matching ids], [number of matching classes], [number of matching tags]" tabindex="0"
                role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">Among selectors that match the target item, priority will be given to the one that has a higher number
        starting from the left.
        In case of two matching "level 1" numbers the winner will be decided based on the highest "level 2" number, all
        the way to the end.
        In case of "!important" on a property, it's like adding another extra column on the left with "1" in it.</p>
    <h5 dir="auto"><a id="user-content-cumulative-layout-shift" class="anchor" aria-hidden="true"
            href="#cumulative-layout-shift"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Cumulative Layout Shift</h5>
    <p dir="auto">Cumulative Layout Shift is what happens when images, ads, embeds and iframes change the page layout
        after being loaded.
        The <a href="https://web.dev/optimize-cls/" rel="nofollow">relevant web.dev page</a> explains how to avoid this,
        but to sum it up: check that the img tag includes the width and height properties to help the browser get the
        correct ratio and placement before the image is downloaded (this may require CSS adjustments).
        Once this is done, you can then add...</p>
    <h5 dir="auto"><a id="user-content-lazy-load" class="anchor" aria-hidden="true" href="#lazy-load"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Lazy Load</h5>
    <p dir="auto">Lazy Load is <a href="https://make.wordpress.org/core/2020/07/14/lazy-loading-images-in-5-5/"
            rel="nofollow">enabled by default since Wordpress 5.5</a> and higher for post and page contents, and is on
        for iframes <a href="https://wordpress.org/support/wordpress-version/version-5-7/#lazy-load-your-iframes"
            rel="nofollow">starting version 5.7</a> (when iframe dimensions are specified).</p>
    <p dir="auto">For content created by the theme, unless you use a plugin like WP Rocket that rewrites the output HTML
        on the fly, you should add it yourself like this:</p>
    <div class="highlight highlight-text-html-basic position-relative overflow-auto">
        <pre><span class="pl-kos">&lt;</span><span class="pl-ent">picture</span><span class="pl-kos">&gt;</span>
   <span class="pl-kos">&lt;</span><span class="pl-ent">source</span><span class="pl-c1">...</span><span class="pl-kos">&gt;</span>
   <span class="pl-kos">&lt;</span><span class="pl-ent">img</span> <span class="pl-c1">src</span>="<span class="pl-s">/images/logo.jpg</span>" <span class="pl-c1">width</span>="<span class="pl-s">640</span>" <span class="pl-c1">height</span>="<span class="pl-s">480</span>" <span class="pl-c1">alt</span>="<span class="pl-s">logo</span>" <span class="pl-c1">loading</span>="<span class="pl-s">lazy</span>"<span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;/</span><span class="pl-ent">picture</span><span class="pl-kos">&gt;</span></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="<picture>
   <source...>
   <img src=&quot;/images/logo.jpg&quot; width=&quot;640&quot; height=&quot;480&quot; alt=&quot;logo&quot; loading=&quot;lazy&quot;>
</picture>" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">The <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-loading"
            rel="nofollow">Living Standard</a> also offers the "eager" value to prioritize some images over others.</p>
    <h5 dir="auto"><a id="user-content-preconnect" class="anchor" aria-hidden="true" href="#preconnect"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Preconnect</h5>
    <p dir="auto">If you use external resources, preconnecting the browser to those hosts can speed up the page loading.
    </p>
    <p dir="auto">You can do so by adding a link tag of rel type "preconnect" in head:</p>
    <div class="highlight highlight-text-html-basic position-relative overflow-auto">
        <pre><span class="pl-kos">&lt;</span><span class="pl-ent">html</span><span class="pl-kos">&gt;</span>
	<span class="pl-kos">&lt;</span><span class="pl-ent">head</span><span class="pl-kos">&gt;</span>
		<span class="pl-kos">&lt;</span><span class="pl-ent">link</span> <span class="pl-c1">rel</span>="<span class="pl-s">preconnect</span>" <span class="pl-c1">href</span>="<span class="pl-s">https://pbs.twimg.com</span>"<span class="pl-kos">&gt;</span></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="<html>
	<head>
		<link rel=&quot;preconnect&quot; href=&quot;https://pbs.twimg.com&quot;>" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <h4 dir="auto"><a id="user-content-check-htmlcss" class="anchor" aria-hidden="true" href="#check-htmlcss"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Check HTML/CSS</h4>
    <p dir="auto">HTML: <a href="https://validator.w3.org/" rel="nofollow">https://validator.w3.org/</a></p>
    <p dir="auto">CSS: <a href="https://jigsaw.w3.org/css-validator/"
            rel="nofollow">https://jigsaw.w3.org/css-validator/</a></p>
    <p dir="auto">Accessibility: <a href="https://wave.webaim.org/" rel="nofollow">https://wave.webaim.org/</a> (Firefox
        includes checks and visual filters too)</p>
    <h4 dir="auto"><a id="user-content-fontawesome-trimming" class="anchor" aria-hidden="true"
            href="#fontawesome-trimming"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
                height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>FontAwesome trimming</h4>
    <p dir="auto">If you only use a small set of icons from FontAwesome, it could be best (the speed up the initial
        display) to create a reduced set.</p>
    <p dir="auto">Even using their kit means downloading the JS, then the CSS files, then the font files.</p>
    <p dir="auto">You could call directly the individual SVG files, embed them if they're only used once, or make a new
        trimmed font this way:</p>
    <ol dir="auto">
        <li>
            <p dir="auto">Get SVG files from <a
                    href="https://github.com/FortAwesome/Font-Awesome/tree/master/svgs">https://github.com/FortAwesome/Font-Awesome/tree/master/svgs</a>
            </p>
        </li>
        <li>
            <p dir="auto">Get icon codes from <a href="https://fontawesome.com/cheatsheet/free"
                    rel="nofollow">https://fontawesome.com/cheatsheet/free</a> (the Solid/Regular/Brands tabs)</p>
        </li>
        <li>
            <p dir="auto">Import SVG files into <a href="https://icomoon.io/" rel="nofollow">https://icomoon.io/</a>
                ("IcoMoon App" on the top bar, then "Generate SVG &amp; More"), select them ("Selection"), set their
                icon codes and export the font ("Generate Font").</p>
        </li>
        <li>
            <p dir="auto">To get a woff2 file (better compressed than woff), import the woff from the zip file in <a
                    href="https://www.font-converter.net/" rel="nofollow">https://www.font-converter.net</a> .</p>
        </li>
        <li>
            <p dir="auto">Add the new font to the CSS (the src will prioritize woff2, then woff, ...):</p>
            <ol dir="auto">
                <li>
                    <div class="highlight highlight-source-css position-relative overflow-auto">
                        <pre><span class="pl-k">@font-face</span> {
  <span class="pl-c1">font-family</span><span class="pl-kos">:</span> <span class="pl-s">'LocalVariant-FA5'</span>;
  <span class="pl-c1">src</span><span class="pl-kos">:</span>         <span class="pl-en">url</span>(<span class="pl-s">'./fonts/LocalVariant-FA5.eot'</span>); <span class="pl-c">/* IE9 Compat Modes */</span>
  <span class="pl-c1">src</span><span class="pl-kos">:</span>         <span class="pl-en">url</span>(<span class="pl-s">'./fonts/LocalVariant-FA5.woff2'</span>) <span class="pl-en">format</span>(<span class="pl-s">'woff2'</span>)<span class="pl-kos">,</span> <span class="pl-c">/* Modern Browsers - &gt;96% Worldwide - https://caniuse.com/woff2 */</span>
               <span class="pl-en">url</span>(<span class="pl-s">'./fonts/LocalVariant-FA5.woff'</span>) <span class="pl-en">format</span>(<span class="pl-s">'woff'</span>)<span class="pl-kos">,</span> <span class="pl-c">/* Modern Browsers - &gt;98% Worldwide - https://caniuse.com/woff */</span>
               <span class="pl-en">url</span>(<span class="pl-s">'./fonts/LocalVariant-FA5.ttf'</span>) <span class="pl-en">format</span>(<span class="pl-s">'truetype'</span>)<span class="pl-kos">,</span> <span class="pl-c">/* Safari, Android, iOS - &gt;98% Worldwide - https://caniuse.com/ttf */</span>
               <span class="pl-en">url</span>(<span class="pl-s">'./fonts/LocalVariant-FA5.svg'</span>) <span class="pl-en">format</span>(<span class="pl-s">'svg'</span>)<span class="pl-kos">,</span> <span class="pl-c">/* Legacy iOS */</span>
               <span class="pl-en">url</span>(<span class="pl-s">'./fonts/LocalVariant-FA5.otf'</span>) <span class="pl-en">format</span>(<span class="pl-s">'opentype'</span>)<span class="pl-kos">,</span> <span class="pl-c">/* Open Type Font */</span>
               <span class="pl-en">url</span>(<span class="pl-s">'./fonts/LocalVariant-FA5.eot?#iefix'</span>) <span class="pl-en">format</span>(<span class="pl-s">'embedded-opentype'</span>); <span class="pl-c">/* IE6-IE8 */</span>
  <span class="pl-c1">font-weight</span><span class="pl-kos">:</span> normal;
  <span class="pl-c1">font-style</span><span class="pl-kos">:</span>  normal;
}</pre>
                        <div class="zeroclipboard-container position-absolute right-0 top-0">
                            <clipboard-copy aria-label="Copy"
                                class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                                data-copy-feedback="Copied!" data-tooltip-direction="w" value="@font-face {
  font-family: 'LocalVariant-FA5';
  src:         url('./fonts/LocalVariant-FA5.eot'); /* IE9 Compat Modes */
  src:         url('./fonts/LocalVariant-FA5.woff2') format('woff2'), /* Modern Browsers - >96% Worldwide - https://caniuse.com/woff2 */
               url('./fonts/LocalVariant-FA5.woff') format('woff'), /* Modern Browsers - >98% Worldwide - https://caniuse.com/woff */
               url('./fonts/LocalVariant-FA5.ttf') format('truetype'), /* Safari, Android, iOS - >98% Worldwide - https://caniuse.com/ttf */
               url('./fonts/LocalVariant-FA5.svg') format('svg'), /* Legacy iOS */
               url('./fonts/LocalVariant-FA5.otf') format('opentype'), /* Open Type Font */
               url('./fonts/LocalVariant-FA5.eot?#iefix') format('embedded-opentype'); /* IE6-IE8 */
  font-weight: normal;
  font-style:  normal;
}" tabindex="0" role="button">
                                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                                    <path fill-rule="evenodd"
                                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                                    </path>
                                    <path fill-rule="evenodd"
                                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                                    </path>
                                </svg>
                                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                                    data-view-component="true"
                                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                                    <path fill-rule="evenodd"
                                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                                    </path>
                                </svg>
                            </clipboard-copy>
                        </div>
                    </div>
                </li>
            </ol>
        </li>
        <li>
            <p dir="auto">Set the font-family of the previous elements to the new font name, keeping their 'content'
                character code the same.</p>
        </li>
    </ol>
    <p dir="auto">And if this font is used on every page, to help speed things a bit more the most used font file could
        be added as a preload in your (again, support for this feature is not yet enabled in Firefox by default):</p>
    <div class="snippet-clipboard-content position-relative overflow-auto">
        <pre lang="php+HTML"><code>&lt;link rel="preload" href="&lt;?= esc_url( $templateDirectoryUri ) ?&gt;/fonts/LocalVariant-FA5.woff2" as="font"&gt;
</code></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w"
                value="<link rel=&quot;preload&quot; href=&quot;<?= esc_url( $templateDirectoryUri ) ?>/fonts/LocalVariant-FA5.woff2&quot; as=&quot;font&quot;>"
                tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">Right now the online version of <a href="https://fontello.com/" rel="nofollow">Fontello</a> doesn't
        support FontAwesome v5 yet, but allows saving as woff and woff2 at once, so check it out from time to time to
        combine steps 3 and 4.</p>
    <p dir="auto">If you want to automate this process you could use fontello-cli (<code>npm -g install
            fontello-cli</code>) in your pipeline, but then you'd need a way to make users download new versions of the
        font.</p>
    <h4 dir="auto"><a id="user-content-bootstrap-trimming" class="anchor" aria-hidden="true"
            href="#bootstrap-trimming"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
                height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Bootstrap trimming</h4>
    <p dir="auto">The same way a minimal version of FontAwesome can be served, if you use Bootstrap in a theme or an
        extension then a light version can be served.</p>
    <p dir="auto">The two main ways are:</p>
    <ul dir="auto">
        <li>Use bootstrap-grid.min.css instead of bootstrap.min.css if you only use the grid system and associated flex
            utilities (~100 Kb saved).</li>
        <li>Maintain your own version of Bootstrap by compiling it with only the components you use (you need NodeJS).
        </li>
    </ul>
    <p dir="auto">The second way is described below (skip the steps that don't apply to you):</p>
    <ol dir="auto">
        <li>Checkout the <a href="https://github.com/twbs/bootstrap">project's Git repository</a></li>
        <li>Switch to the tag of the version you want to trim and create your own local branch off of it (make one per
            project if needed)</li>
        <li>Comment out the SCSS imports you don't need in /scss/bootstrap.scss</li>
        <li>Comment out the JS modules you don't need in /js/src/index.js</li>
        <li>Compile the CSS with the <code>npm run css</code> command from the root folder</li>
        <li>Compile the JS with the <code>npm run js</code> command from the root folder</li>
        <li>When a new version of Bootstrap is released, create a new local branch off of its tag, switch (with merge)
            to it, then recompile</li>
    </ol>
    <p dir="auto">As Bootstrap components can have a lot of dependencies, you may have to uncomment more components than
        you thought before compiling successfully.</p>
    <p dir="auto">Steps 6 and 7 can be integrated in the IDE (in PhpStorm: <code>Run/Edit Configurations...</code> ,
        <code>+</code> on the top left, select <code>npm</code>, and the step you want in <code>Scripts</code>).
        Other steps are available, including some that recompile automatically on changes: look at the package.json file
        to see the full list and the commands they run.</p>
    <h4 dir="auto"><a id="user-content-serve-locally-as-much-data-as-possible" class="anchor" aria-hidden="true"
            href="#serve-locally-as-much-data-as-possible"><svg class="octicon octicon-link" viewBox="0 0 16 16"
                version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Serve locally as much data as possible</h4>
    <p dir="auto">A standard advice previously was to use external CDNs (such as Google Fonts) as much as possible to
        cache once any libraries/fonts/... that would be used by multiple websites.</p>
    <p dir="auto">However <a
            href="https://www.zdnet.com/article/chromes-new-cache-partitioning-system-impacts-google-fonts-performance/"
            rel="nofollow">since Chrome 86</a> (October 2020), this is not the case anymore for the most used web
        browser: its cache is now partitioned per-website.
        Which means that querying a CDN would only add latency to the overall loading time.
        As the linked article states, Safari also partitioned its cache the same way since 2013, other Chromium-based
        browsers should follow suit, and it could also come soon to Firefox.</p>
    <p dir="auto">A case for which CDNs stay relevant is to always make the user download the latest version of JS
        libraries, as they could contain bugs you wouldn't want to be seen exploited on your website between their
        discovery and your update of the local elements.</p>
    <h4 dir="auto"><a id="user-content-font-splitting" class="anchor" aria-hidden="true" href="#font-splitting"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Font splitting</h4>
    <p dir="auto">This follows directly the previous point.</p>
    <p dir="auto">For some fonts, Google Fonts splits them so users only download the Unicode range they need for the
        characters on the page.
        In this case, serving the font locally as a big file could increase the download size and size, especially for
        languages like Japanese.</p>
    <p dir="auto">For instance, the <a href="https://fonts.google.com/specimen/Noto+Sans+JP" rel="nofollow">Noto Sans
            JP</a> font is <a href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400&amp;display=swap"
            rel="nofollow">split in 120 sub-fonts</a> when served from Google Fonts (see the <a
            href="https://developers.googleblog.com/2018/09/google-fonts-launches-japanese-support.html"
            rel="nofollow">Google Font team's reasoning</a>).</p>
    <p dir="auto">To achieve the same result locally, depending in the font, you could use a tool like <a
            href="https://github.com/VdustR/font-splitter">VdustR's font-splitter</a> to split in chunks or <a
            href="https://github.com/doasync/font-ranger">doasync's font-ranger</a> to split by subset.</p>
    <p dir="auto">For people dealing with Japanese fonts, this article describes another alternative with the Win/Mac
        program <a href="https://opentype.jp/subsetfontmk.htm" rel="nofollow">subsetfontmk</a> and <a
            href="https://u-618.org/webfont-subset/" rel="nofollow">U-618's subsets</a>:
        <a href="https://www.granfairs.com/blog/staff/webfont-by-selfhosting"
            rel="nofollow">Webフォントをサーバにアップロードして使うには？注意点や実装方法まとめ (GRANFAIRS)</a>
        You could also start with a list of kanji by <a href="https://kanjicards.org/kanji-list-by-freq.html"
            rel="nofollow">usage frequency</a>, to generate subsets based on it (doing the split with a script or
        spreadsheet functions/macros, like having progressively smaller subsets the further you go from the most used
        characters).</p>
    <h3 dir="auto"><a id="user-content-check-your-logs-for-404-queries" class="anchor" aria-hidden="true"
            href="#check-your-logs-for-404-queries"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Check your logs for 404 queries</h3>
    <p dir="auto">HTTP requests going 404 (for missing resources) will retrieve the 404 page defined in Wordpress, which
        means that if you load a page containing 5 resources that don't exist, the "Not Found" page will be generated
        (or at least retrieved) 5 times: in situations when cache is not enabled (logged-in users, Woocommerce pages,
        ...) or set up (quick and dirty hosting), this could seriously affect performance.</p>
    <p dir="auto">To act preemptively you can configure your webserver to not redirect queries to Wordpress when they
        match filenames that would exist in some directories (like wp-content).</p>
    <h3 dir="auto"><a id="user-content-set-your-faviconico" class="anchor" aria-hidden="true"
            href="#set-your-faviconico"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
                height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Set your favicon.ico</h3>
    <p dir="auto">In the same vein, accessing /favicon.ico when using a <a
            href="https://wordpress.org/support/article/creating-a-favicon/" rel="nofollow">Wordpress-configured
            Favicon</a> (Site Icon) also implies loading the whole CMS just to get one small file, when the browser
        queries /favicon.ico instead of using the defined in the HTML .
        This could be an issue (or not) depending on your webserver configuration.</p>
    <h2 dir="auto"><a id="user-content-get-away-from-wordpress" class="anchor" aria-hidden="true"
            href="#get-away-from-wordpress"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Get away from WordPress</h2>
    <p dir="auto">The best way to avoid all the performance issues of dynamic websites... can be to make them static.
    </p>
    <p dir="auto">One of the best frameworks for this is <a href="https://gohugo.io/" rel="nofollow">Hugo</a>, which can
        <a href="https://gohugo.io/tools/migrations/#wordpress" rel="nofollow">import WordPress contents</a> through
        plug-ins and tools.</p>
    <h2 dir="auto"><a id="user-content-other-non-perf-related-useful-things" class="anchor" aria-hidden="true"
            href="#other-non-perf-related-useful-things"><svg class="octicon octicon-link" viewBox="0 0 16 16"
                version="1.1" width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Other (non perf-related) useful things</h2>
    <h3 dir="auto"><a id="user-content-ssl" class="anchor" aria-hidden="true" href="#ssl"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>SSL</h3>
    <p dir="auto">Every website should be served through HTTPS in this day and age.</p>
    <p dir="auto">Test your server configuration from time to time using <a href="https://www.ssllabs.com/ssltest/"
            rel="nofollow">Qualys's SSL Server Test</a>, and keep your configuration up-to-date in your various daemons
        using the <a href="https://ssl-config.mozilla.org/" rel="nofollow">Mozilla SSL Configuration Generator</a>.</p>
    <p dir="auto">If you use Certbot to get <a href="https://letsencrypt.org/" rel="nofollow">Let's Encrypt</a> free
        certificates, or your hosting company's interface, then good settings should be set and updated automatically.
    </p>
    <p dir="auto">Be wary of manual redirects from <a href="http://domain" rel="nofollow">http://domain</a> to <a
            href="http://www.domain" rel="nofollow">http://www.domain</a> and vice-versa in .htaccess or other config
        files, as they could keep the Let's Encrypt server from verifying both default URL forms: a redirection
        exception for the .well-known subfolder should then be made. Anyway you should let WordPress do that redirect.
    </p>
    <p dir="auto"><a href="https://letsencrypt.org/docs/staging-environment/" rel="nofollow">On staging
            environments</a>, the --dry-run option of certbot allows the generation of certificates signed by a "fake"
        intermediate certificate issued by a root certificate not present in browser/client trust stores: you can have a
        specific browser or browser profile set up with this root certificate, or bypass the security message each time
        (in Chrome, this can be done by typing <code>thisisunsafe</code> while on the error page).</p>
    <h3 dir="auto"><a id="user-content-mailer-return-path" class="anchor" aria-hidden="true"
            href="#mailer-return-path"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16"
                height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Mailer Return-Path</h3>
    <p dir="auto">By default, WordPress fucks up the Return-Path with PHPMailer, which doesn't help with spam filters.
    </p>
    <p dir="auto">The <a href="https://fr.wordpress.org/plugins/wp-mail-returnpath/" rel="nofollow">wp_mail
            return-path</a> plugin sets the PHPMailer Sender (return-path) the same as the From address if it’s not
        correctly set.</p>
    <h3 dir="auto"><a id="user-content-url-change" class="anchor" aria-hidden="true" href="#url-change"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>URL Change</h3>
    <p dir="auto">For some reason, you may have to change the website URL (prod to dev or http to https can be a valid
        reason).</p>
    <p dir="auto">The final website URL shouldn't be present anywhere in the theme (PHP/CSS) or in posts/pages/menus,
        where relative links should be used (is also helps to test the website correctly).
        The following is for the places where you can't always do that, or when WP uses the final URL behind your back.
    </p>
    <p dir="auto">Here is my recommended process (if you changed servers, once all data has been transferred):</p>
    <ol dir="auto">
        <li>
            <p dir="auto">You can skip this step if you don't need to go to the website before altering its database.
            </p>
            <p dir="auto">Add the following to your wp-config.php, before the last <code>require_once(ABSPATH .
                    'wp-settings.php')</code> :</p>
            <div class="highlight highlight-text-html-php position-relative overflow-auto">
                <pre><span class="pl-en">define</span>( <span class="pl-s">'WP_HOME'</span>, <span class="pl-s">'http://new.home.com'</span> ); <span class="pl-c">// Base URL for links</span>
<span class="pl-en">define</span>( <span class="pl-s">'WP_SITEURL'</span>, <span class="pl-s">'http://new.home.com/site'</span> ); <span class="pl-c">// Base for the ressources relative to DocumentRoot</span>
<span class="pl-en">define</span>( <span class="pl-s">'FORCE_SSL_ADMIN'</span>, <span class="pl-c1">false</span> ); <span class="pl-c">// Only if doing the process locally</span></pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="define( 'WP_HOME', 'http://new.home.com' ); // Base URL for links
define( 'WP_SITEURL', 'http://new.home.com/site' ); // Base for the ressources relative to DocumentRoot
define( 'FORCE_SSL_ADMIN', false ); // Only if doing the process locally" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
            <p dir="auto">Usually WP_HOME and WP_SITEURL are the same, but if you move WordPress to a subfolder (let's
                call it "site") and copy its index.php to the parent (new root) while changing:</p>
            <div class="highlight highlight-text-html-php position-relative overflow-auto">
                <pre><span class="pl-k">require</span> __DIR__ . <span class="pl-s">'/wp-blog-header.php'</span>;</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w"
                        value="require __DIR__ . '/wp-blog-header.php';" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
            <p dir="auto">into</p>
            <div class="highlight highlight-text-html-php position-relative overflow-auto">
                <pre><span class="pl-k">require</span> __DIR__ . <span class="pl-s">'/site/wp-blog-header.php'</span>; </pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w"
                        value="require __DIR__ . '/site/wp-blog-header.php'; " tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
            <p dir="auto">then "/site" needs to be added to WP_SITEURL.</p>
            <p dir="auto">This could be useful if you only have access to DocumentRoot (through SFTP for instance) and
                no upper level, to keep things tidy in some cases.</p>
            <p dir="auto">Setting those values inside wp-config.php would keep you from changing them in the WordPress
                admin panel: even if it's non-standard you may prefer it that way.</p>
        </li>
        <li>
            <p dir="auto">Use the <a href="https://github.com/interconnectit/Search-Replace-DB">Search Replace DB</a>
                tool to correctly change all instances of the previous URL (or WP CLI, see below).</p>
            <p dir="auto">Indeed you could do most changes with good old SQL queries like this:</p>
            <div class="highlight highlight-source-sql position-relative overflow-auto">
                <pre><span class="pl-k">SET</span> @oldUrl <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>https://old.url/site<span class="pl-pds">'</span></span>; <span class="pl-c"><span class="pl-c">--</span> Without ending slash</span>
<span class="pl-k">SET</span> @newUrl <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>https://new.url<span class="pl-pds">'</span></span>; <span class="pl-c"><span class="pl-c">--</span> Also without ending slash</span>

<span class="pl-k">UPDATE</span> wp_options <span class="pl-k">SET</span> option_value <span class="pl-k">=</span> REPLACE(option_value, @oldUrl, @newUrl) <span class="pl-k">WHERE</span> option_value <span class="pl-k">LIKE</span> CONCAT(<span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>, @oldUrl, <span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>); <span class="pl-c"><span class="pl-c">--</span> BEWARE, SEE NOTE AFTER THIS BLOCK</span>
<span class="pl-k">UPDATE</span> wp_usermeta <span class="pl-k">SET</span> meta_value <span class="pl-k">=</span> REPLACE(meta_value, CONCAT(@oldUrl, <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>), CONCAT(@newUrl, <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>)) <span class="pl-k">WHERE</span> meta_value <span class="pl-k">LIKE</span> CONCAT(<span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>, @oldUrl, <span class="pl-s"><span class="pl-pds">'</span>/%<span class="pl-pds">'</span></span>);
<span class="pl-k">UPDATE</span> wp_posts <span class="pl-k">SET</span> post_content <span class="pl-k">=</span> REPLACE(post_content, CONCAT(@oldUrl, <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>), CONCAT(@newUrl, <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>)) <span class="pl-k">WHERE</span> post_content <span class="pl-k">LIKE</span> CONCAT(<span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>, @oldUrl, <span class="pl-s"><span class="pl-pds">'</span>/%<span class="pl-pds">'</span></span>);</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w"
                        value="SET @oldUrl = 'https://old.url/site'; -- Without ending slash
SET @newUrl = 'https://new.url'; -- Also without ending slash

UPDATE wp_options SET option_value = REPLACE(option_value, @oldUrl, @newUrl) WHERE option_value LIKE CONCAT('%', @oldUrl, '%'); -- BEWARE, SEE NOTE AFTER THIS BLOCK
UPDATE wp_usermeta SET meta_value = REPLACE(meta_value, CONCAT(@oldUrl, '/'), CONCAT(@newUrl, '/')) WHERE meta_value LIKE CONCAT('%', @oldUrl, '/%');
UPDATE wp_posts SET post_content = REPLACE(post_content, CONCAT(@oldUrl, '/'), CONCAT(@newUrl, '/')) WHERE post_content LIKE CONCAT('%', @oldUrl, '/%');" tabindex="0"
                        role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
            <p dir="auto">However some option_value fields, in wp_options, are stored using <a
                    href="https://www.php.net/manual/en/function.serialize.php" rel="nofollow">serialized</a> data where
                string lengths are stored like this:</p>
            <div class="highlight highlight-text-html-php position-relative overflow-auto">
                <pre>s:<span class="pl-c1">5</span>:<span class="pl-s">"value"</span>; <span class="pl-c">// data_type:data_length:data</span></pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w"
                        value="s:5:&quot;value&quot;; // data_type:data_length:data" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
            <p dir="auto">If your new URL has a different length then you can't correctly update the serialized data
                using SQL alone (or maybe you can, but I wouldn't want to be the one maintaining those queries).</p>
            <p dir="auto">The previously mentioned tool knows how to deal with that by unserializing, updating, then
                reserializing the data.
                Check twice that you <a
                    href="https://wordpress.org/support/article/changing-the-site-url/#important-guid-note"
                    rel="nofollow">don't change GUIDs</a>!</p>
            <p dir="auto">You can also see the "WP CLI" section below, which offers a command to do the same thing (the
                same note as below also applies here: do a second run with escaped slashes in the URL if using Gutenberg
                blocks).</p>
        </li>
        <li>
            <p dir="auto">If you skipped point 1 or if you want to remove the wp-config.php values later:</p>
            <p dir="auto">Using a SQL CLI or GUI, go to the wp_options to change the fields (where option_name is
                siteurl and home, usually option_id 1 and 2) to the wished values (see explanations in 1. for the
                difference between the two).</p>
        </li>
        <li>
            <p dir="auto">If you followed point 1. and want to be able to edit the siteurl and home settings from the WP
                Admin:</p>
            <p dir="auto">Remove the values from the wp-config.php file.</p>
        </li>
        <li>
            <p dir="auto">If you changed it in wp-config.php in point 1, once you've setup SSL set FORCE_SSL_ADMIN back
                to TRUE.</p>
        </li>
        <li>
            <p dir="auto">Check the theme files (PHP/CSS/JS): many developers love to put absolute URLs everywhere in
                them.</p>
            <p dir="auto">Check .htaccess files too, just in case.</p>
        </li>
        <li>
            <p dir="auto">You may want to add redirections for SEO purposes</p>
            <ol dir="auto">
                <li>
                    <p dir="auto">Apache HTTPd:</p>
                    <p dir="auto">Using mod_alias:</p>
                    <p dir="auto">In the config file of the old VHost:</p>
                    <div class="highlight highlight-source-apache-config position-relative overflow-auto">
                        <pre><span class="pl-c1">Redirect</span> temp      /oldpath https://newdomain.tld/newpath <span class="pl-c"><span class="pl-c">#</span> 302</span>
<span class="pl-c1">Redirect</span> permanent /oldpath https://newdomain.tld/newpath <span class="pl-c"><span class="pl-c">#</span> 301</span></pre>
                        <div class="zeroclipboard-container position-absolute right-0 top-0">
                            <clipboard-copy aria-label="Copy"
                                class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                                data-copy-feedback="Copied!" data-tooltip-direction="w" value="Redirect temp      /oldpath https://newdomain.tld/newpath # 302
Redirect permanent /oldpath https://newdomain.tld/newpath # 301" tabindex="0" role="button">
                                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                                    <path fill-rule="evenodd"
                                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                                    </path>
                                    <path fill-rule="evenodd"
                                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                                    </path>
                                </svg>
                                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                                    data-view-component="true"
                                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                                    <path fill-rule="evenodd"
                                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                                    </path>
                                </svg>
                            </clipboard-copy>
                        </div>
                    </div>
                    <p dir="auto">(use mod_rewrite for other cases)</p>
                </li>
                <li>
                    <p dir="auto">NGINX:</p>
                    <p dir="auto">In the config file of the old domain, if the domain is changed (oldpath and newpath
                        can be similar, different, or empty):</p>
                    <div class="highlight highlight-source-nginx position-relative overflow-auto">
                        <pre><span class="pl-k">rewrite</span> <span class="pl-sr">^/oldpath(/?.*)$ </span><span class="pl-smi">$scheme</span>://newdomain.tld/newpath<span class="pl-smi">$1</span> redirect;  <span class="pl-c"># 302</span>
<span class="pl-k">rewrite</span> <span class="pl-sr">^/oldpath(/?.*)$ </span><span class="pl-smi">$scheme</span>://newdomain.tld/newpath<span class="pl-smi">$1</span> permanent; <span class="pl-c"># 301</span></pre>
                        <div class="zeroclipboard-container position-absolute right-0 top-0">
                            <clipboard-copy aria-label="Copy"
                                class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                                data-copy-feedback="Copied!" data-tooltip-direction="w" value="rewrite ^/oldpath(/?.*)$ $scheme://newdomain.tld/newpath$1 redirect;  # 302
rewrite ^/oldpath(/?.*)$ $scheme://newdomain.tld/newpath$1 permanent; # 301" tabindex="0" role="button">
                                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                                    <path fill-rule="evenodd"
                                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                                    </path>
                                    <path fill-rule="evenodd"
                                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                                    </path>
                                </svg>
                                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                                    data-view-component="true"
                                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                                    <path fill-rule="evenodd"
                                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                                    </path>
                                </svg>
                            </clipboard-copy>
                        </div>
                    </div>
                    <p dir="auto">In the same config file, if the domain is unchanged but the path is different:</p>
                    <div class="highlight highlight-source-nginx position-relative overflow-auto">
                        <pre><span class="pl-k">rewrite</span> <span class="pl-sr">^/oldpath(/?.*)$ </span>/newpath<span class="pl-smi">$1</span> redirect;  <span class="pl-c"># 302</span>
<span class="pl-k">rewrite</span> <span class="pl-sr">^/oldpath(/?.*)$ </span>/newpath<span class="pl-smi">$1</span> permanent; <span class="pl-c"># 301</span></pre>
                        <div class="zeroclipboard-container position-absolute right-0 top-0">
                            <clipboard-copy aria-label="Copy"
                                class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                                data-copy-feedback="Copied!" data-tooltip-direction="w" value="rewrite ^/oldpath(/?.*)$ /newpath$1 redirect;  # 302
rewrite ^/oldpath(/?.*)$ /newpath$1 permanent; # 301" tabindex="0" role="button">
                                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                                    <path fill-rule="evenodd"
                                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                                    </path>
                                    <path fill-rule="evenodd"
                                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                                    </path>
                                </svg>
                                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                                    data-view-component="true"
                                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                                    <path fill-rule="evenodd"
                                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                                    </path>
                                </svg>
                            </clipboard-copy>
                        </div>
                    </div>
                    <p dir="auto">Do your own recipes, these are only examples.</p>
                </li>
            </ol>
        </li>
        <li>
            <p dir="auto">Check various redirection cases with curl to see redirection type and URL:</p>
            <div class="highlight highlight-source-shell position-relative overflow-auto">
                <pre>curl -I https://olddomain.tld/oldpath
curl -I https://olddomain.tld/oldpath/
curl -I https://olddomain.tld/oldpath/wp-admin
curl -I https://olddomain.tld/oldpath/123
curl -I https://olddomain.tld/oldpath/<span class="pl-k">?</span>p=123</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="curl -I https://olddomain.tld/oldpath
curl -I https://olddomain.tld/oldpath/
curl -I https://olddomain.tld/oldpath/wp-admin
curl -I https://olddomain.tld/oldpath/123
curl -I https://olddomain.tld/oldpath/?p=123" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
            <p dir="auto">Example output:</p>
            <div class="highlight highlight-source-shell position-relative overflow-auto">
                <pre>$ curl -I https://olddomain.tld/oldpath/</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w"
                        value="$ curl -I https://olddomain.tld/oldpath/" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
            <div class="highlight highlight-source-httpspec position-relative overflow-auto">
                <pre><span class="pl-ii">HTTP/1.1 301 Moved Permanently</span>
<span class="pl-s"><span class="pl-v">Server:</span> nginx</span>
<span class="pl-s"><span class="pl-v">Date:</span> Fri, 21 Aug 2020 03:58:07 GMT</span>
<span class="pl-s"><span class="pl-v">Content-Type:</span> text/html</span>
<span class="pl-s"><span class="pl-v">Content-Length:</span> 162</span>
<span class="pl-s"><span class="pl-v">Connection:</span> keep-alive</span>
<span class="pl-s"><span class="pl-v">Location:</span> https://newdomain.tld/newpath/</span></pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="HTTP/1.1 301 Moved Permanently
Server: nginx
Date: Fri, 21 Aug 2020 03:58:07 GMT
Content-Type: text/html
Content-Length: 162
Connection: keep-alive
Location: https://newdomain.tld/newpath/" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
        </li>
    </ol>
    <h3 dir="auto"><a id="user-content-wp-cli" class="anchor" aria-hidden="true" href="#wp-cli"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>WP CLI</h3>
    <p dir="auto">Administrative tasks can be done in a faster and safer way by using WP-CLI.</p>
    <ul dir="auto">
        <li><a href="https://make.wordpress.org/cli/handbook/" rel="nofollow">Handbook</a> (<a
                href="https://make.wordpress.org/cli/handbook/guides/installing/" rel="nofollow">Install</a>)</li>
        <li><a href="https://developer.wordpress.org/cli/commands/" rel="nofollow">Command Reference</a></li>
        <li><a href="https://github.com/maheshwaghmare/wp-cli-commands-cheat-sheet">Command List</a> (without details)
        </li>
    </ul>
    <p dir="auto">Examples:</p>
    <ul dir="auto">
        <li>
            <p dir="auto">Install WP CLI</p>
            <div class="highlight highlight-source-shell position-relative overflow-auto">
                <pre>$ composer global require wp-cli/wp-cli-bundle</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w"
                        value="$ composer global require wp-cli/wp-cli-bundle" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
        </li>
        <li>
            <p dir="auto"><a href="https://developer.wordpress.org/cli/commands/core/update/" rel="nofollow">Upgrade</a>
                WP to the latest version (DB upgrade included)</p>
            <div class="highlight highlight-source-shell position-relative overflow-auto">
                <pre>$ wp core update</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="$ wp core update" tabindex="0"
                        role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
        </li>
        <li>
            <p dir="auto"><a href="https://developer.wordpress.org/cli/commands/plugin/update/"
                    rel="nofollow">Upgrade</a> plugins to the latest version</p>
            <div class="highlight highlight-source-shell position-relative overflow-auto">
                <pre>$ wp plugin update --all</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="$ wp plugin update --all"
                        tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
        </li>
        <li>
            <p dir="auto"><a href="https://developer.wordpress.org/cli/commands/core/update/" rel="nofollow">Upgrade</a>
                theme to the latest version</p>
            <div class="highlight highlight-source-shell position-relative overflow-auto">
                <pre>$ wp theme update --all</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="$ wp theme update --all"
                        tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
        </li>
        <li>
            <p dir="auto"><a href="https://developer.wordpress.org/cli/commands/user/create/" rel="nofollow">Create</a>
                an administrative user (may be useful)</p>
            <div class="highlight highlight-source-shell position-relative overflow-auto">
                <pre>$ wp user create TemporaryAdmin your@email.tld --role=administrator --user_pass=YourPassword</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w"
                        value="$ wp user create TemporaryAdmin your@email.tld --role=administrator --user_pass=YourPassword"
                        tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
        </li>
        <li>
            <p dir="auto"><a href="https://developer.wordpress.org/cli/commands/user/delete/" rel="nofollow">Delete</a>
                a user (we suppose no content was created by it)</p>
            <div class="highlight highlight-source-shell position-relative overflow-auto">
                <pre>$ wp user delete TemporaryAdmin</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="$ wp user delete TemporaryAdmin"
                        tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
        </li>
        <li>
            <p dir="auto"><a href="https://developer.wordpress.org/cli/commands/search-replace/" rel="nofollow">Search
                    &amp; Replace</a> a string (for instance, to change the website URL) (serialized data supported)</p>
            <div class="highlight highlight-source-shell position-relative overflow-auto">
                <pre><span class="pl-c"><span class="pl-c">#</span> Test run</span>
$ wp search-replace <span class="pl-s"><span class="pl-pds">'</span>http://old.site.tld<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>https://new.site.tld<span class="pl-pds">'</span></span> --skip-columns=guid --dry-run
<span class="pl-c"><span class="pl-c">#</span> Final run</span>
$ wp search-replace <span class="pl-s"><span class="pl-pds">'</span>http://old.site.tld<span class="pl-pds">'</span></span> <span class="pl-s"><span class="pl-pds">'</span>https://new.site.tld<span class="pl-pds">'</span></span> --skip-columns=guid</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="# Test run
$ wp search-replace 'http://old.site.tld' 'https://new.site.tld' --skip-columns=guid --dry-run
# Final run
$ wp search-replace 'http://old.site.tld' 'https://new.site.tld' --skip-columns=guid" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
            <p dir="auto">(Warning: if using URLs in Gutenberg blocks, see <a
                    href="https://github.com/wp-cli/wp-cli/issues/5293">this issue</a>: you'll need to do another run
                with escaped slashes, http:// becoming http://)</p>
        </li>
        <li>
            <p dir="auto">Remove the <a href="https://developer.wordpress.org/cli/commands/maintenance-mode/"
                    rel="nofollow">maintenance mode</a> (plugin updates can crash and leave this mode on: you can also
                remove the .maintenance file manually)</p>
            <div class="highlight highlight-source-shell position-relative overflow-auto">
                <pre>$ wp maintenance-mode deactivate</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="$ wp maintenance-mode deactivate"
                        tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
        </li>
    </ul>
    <h3 dir="auto"><a id="user-content-bedrock" class="anchor" aria-hidden="true" href="#bedrock"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Bedrock</h3>
    <p dir="auto">You may find it easier in the long run to use <a href="https://roots.io/bedrock/"
            rel="nofollow">Bedrock</a> if your development process involves a deployment pipeline, multiple
        environments, or even containers.
        Be warned that some plugins may not be compatible with Bedrock's particular folder layout.</p>
    <p dir="auto">More information/links:</p>
    <ul dir="auto">
        <li>
            <p dir="auto"><a href="https://www.kurzor.net/blog/roots-io-and-bedrock"
                    rel="nofollow">https://www.kurzor.net/blog/roots-io-and-bedrock</a></p>
        </li>
        <li>
            <p dir="auto"><a href="https://css-tricks.com/intro-bedrock-wordpress/"
                    rel="nofollow">https://css-tricks.com/intro-bedrock-wordpress/</a></p>
        </li>
    </ul>
    <h3 dir="auto"><a id="user-content-internationalizationlocalization" class="anchor" aria-hidden="true"
            href="#internationalizationlocalization"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Internationalization+Localization</h3>
    <p dir="auto">Back to the developer side: you may have, for whatever reason, to translate a theme (yours or not).
    </p>
    <p dir="auto">The process relies on prepared PHP code, that is analyzed to produce a .pot file : you'll use it as a
        base to create a .po file through something like <a href="https://poedit.net/" rel="nofollow">Poedit</a>, and
        compile it to a binary .mo file.</p>
    <h4 dir="auto"><a id="user-content-preparing-the-php-code-i18n" class="anchor" aria-hidden="true"
            href="#preparing-the-php-code-i18n"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Preparing the PHP code (i18n)</h4>
    <p dir="auto">Follow the <a href="https://codex.wordpress.org/I18n_for_WordPress_Developers"
            rel="nofollow">WordPress guide</a>.</p>
    <p dir="auto">In short, you'll have to change:</p>
    <div class="snippet-clipboard-content position-relative overflow-auto">
        <pre lang="php+HTML"><code>&lt;?php $str = 'Hello World!0'; ?&gt;
&lt;p&gt;Hello World!1&lt;/p&gt;
&lt;p&gt;Hello World!2&lt;/p&gt;
</code></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="<?php $str = 'Hello World!0'; ?>
<p>Hello World!1</p>
<p>Hello World!2</p>" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">Into this:</p>
    <div class="snippet-clipboard-content position-relative overflow-auto">
        <pre lang="php+HTML"><code>&lt;?php $str = __( 'Hello World!0', 'text-domain' ); ?&gt;
&lt;p&gt;&lt;?= esc_html__( 'Hello World!1', 'text-domain' ); ?&gt;&lt;/p&gt;
&lt;p&gt;&lt;?php esc_html_e( 'Hello World!2', 'text-domain' ); ?&gt;&lt;/p&gt;
</code></pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w" value="<?php $str = __( 'Hello World!0', 'text-domain' ); ?>
<p><?= esc_html__( 'Hello World!1', 'text-domain' ); ?></p>
<p><?php esc_html_e( 'Hello World!2', 'text-domain' ); ?></p>" tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">"text-domain" being the theme/plugin folder name.</p>
    <p dir="auto">Then create the .pot file, for instance <a
            href="https://developer.wordpress.org/cli/commands/i18n/make-pot/" rel="nofollow">with WP-CLI</a>:</p>
    <div class="highlight highlight-source-shell position-relative overflow-auto">
        <pre>$ wp i18n make-pot wp-content/plugins/pluginName/ wp-content/plugins/pluginName/languages/pluginName.pot</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w"
                value="$ wp i18n make-pot wp-content/plugins/pluginName/ wp-content/plugins/pluginName/languages/pluginName.pot"
                tabindex="0" role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <h4 dir="auto"><a id="user-content-translating-l10n" class="anchor" aria-hidden="true" href="#translating-l10n"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Translating (l10n)</h4>
    <p dir="auto">Get your editor, translate from the .pot to a localized .po, compile and put the .mo file in the
        appropriate directory:</p>
    <ul dir="auto">
        <li>Theme: wp-content/themes/themeName/languages/languageCode.mo</li>
        <li>Plugin: wp-content/plugins/pluginName/languages/pluginName-languageCode.mo</li>
        <li>Any: wp-content/languages/{plugins,themes}/pluginOrThemeName-languageCode.mo</li>
    </ul>
    <p dir="auto">languageCode being either "<a
            href="http://www.gnu.org/software/gettext/manual/html_chapter/gettext_16.html#Country-Codes"
            rel="nofollow">countryCode</a>" or "countryCode_<a
            href="http://www.gnu.org/software/gettext/manual/html_chapter/gettext_16.html#Language-Codes"
            rel="nofollow">languageCode</a>", but the translation tool usually takes care of that.</p>
    <h4 dir="auto"><a id="user-content-warning" class="anchor" aria-hidden="true" href="#warning"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Warning</h4>
    <p dir="auto">If you use multilingual website in conjunction with a cache system (CDN or HTTPD) and the language is
        not part of the URL, add the language in the cache key: this would also mean adding the served language in a
        HTTP header for the caching system to be able to read it.</p>
    <h3 dir="auto"><a id="user-content-database-backups" class="anchor" aria-hidden="true" href="#database-backups"><svg
                class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Database backups</h3>
    <p dir="auto">If you're doing database backups (which you should do), chances are that you're using mysqldump in a
        cron script for that.</p>
    <p dir="auto">As modern WordPress installs only use InnoDB tables, you can skip the default table locking meant
        mostly for MyISAM (which makes all tables unreachable during the export) and instead export everything in a
        single transaction:</p>
    <div class="highlight highlight-source-shell position-relative overflow-auto">
        <pre>mysqldump --single-transaction --skip-lock-tables some_database <span class="pl-k">&gt;</span> some_database.sql</pre>
        <div class="zeroclipboard-container position-absolute right-0 top-0">
            <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                data-copy-feedback="Copied!" data-tooltip-direction="w"
                value="mysqldump --single-transaction --skip-lock-tables some_database > some_database.sql" tabindex="0"
                role="button">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                    <path fill-rule="evenodd"
                        d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                    </path>
                    <path fill-rule="evenodd"
                        d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                    </path>
                </svg>
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                    data-view-component="true"
                    class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                    <path fill-rule="evenodd"
                        d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                    </path>
                </svg>
            </clipboard-copy>
        </div>
    </div>
    <p dir="auto">(<a href="https://serversforhackers.com/c/mysqldump-with-modern-mysql" rel="nofollow">source</a>)</p>
    <h3 dir="auto"><a id="user-content-preparing-for-php-upgrades" class="anchor" aria-hidden="true"
            href="#preparing-for-php-upgrades"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Preparing for PHP upgrades</h3>
    <p dir="auto">You can test if your existing plugins and themes will be compatible with a PHP version you haven't
        installed yet by running one of these tools:</p>
    <ul dir="auto">
        <li><a href="https://wordpress.org/plugins/php-compatibility-checker/" rel="nofollow">PHP Compatibility
                Checker</a> WP plugin (tests for PHP 7.0 to 7.3)</li>
        <li>The <a href="https://github.com/PHPCompatibility/PHPCompatibilityWP">PHPCompatibilityWP</a> Ruleset for
            PHP_CodeSniffer</li>
    </ul>
    <p dir="auto">For migrations to PHP 8.0, see the <a
            href="https://developer.yoast.com/blog/the-2020-wordpress-and-php-8-compatibility-report/"
            rel="nofollow">relevant article by the Yoast SEO team</a>.</p>
    <h3 dir="auto"><a id="user-content-serving-your-local-environment" class="anchor" aria-hidden="true"
            href="#serving-your-local-environment"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1"
                width="16" height="16" aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                </path>
            </svg></a>Serving your local environment</h3>
    <p dir="auto">You may want to show your local environment to somebody else, or a test service, without having a
        publicly accessible dev server.</p>
    <p dir="auto">With a bit of tinkering on your WordPress, you can use the ngrok service to <a
            href="https://matthewshields.co.uk/sharing-local-wordpress-sites-remotely-using-ngrok" rel="nofollow">tunnel
            your local WP server publicly</a>.</p>
    <p dir="auto">If you pay for an account, you can have the tunnel running on custom URLs.</p>
    <p dir="auto">Short version of Matthew Shields' blog post:</p>
    <ol dir="auto">
        <li>
            <p dir="auto"><a href="https://dashboard.ngrok.com/signup" rel="nofollow">Create an account</a> on ngrok</p>
        </li>
        <li>
            <p dir="auto">Follow the instructions on the "Setup &amp; Installation" page of your dashboard</p>
        </li>
        <li>
            <p dir="auto">Add this to your wp-config.php, before the last require_once directive (code taken from the
                blog post):</p>
            <div class="highlight highlight-text-html-php position-relative overflow-auto">
                <pre><span class="pl-k">if</span>(<span class="pl-en">strpos</span>(<span class="pl-s1"><span class="pl-c1">$</span><span class="pl-c1">_SERVER</span></span>[<span class="pl-s">'HTTP_X_ORIGINAL_HOST'</span>], <span class="pl-s">'ngrok'</span>) !== <span class="pl-c1">FALSE</span>) {
	<span class="pl-k">if</span>(
		<span class="pl-en">isset</span>(<span class="pl-s1"><span class="pl-c1">$</span><span class="pl-c1">_SERVER</span></span>[<span class="pl-s">'HTTP_X_ORIGINAL_HOST'</span>]) &amp;&amp; 
		<span class="pl-s1"><span class="pl-c1">$</span><span class="pl-c1">_SERVER</span></span>[<span class="pl-s">'HTTP_X_ORIGINAL_HOST'</span>] === <span class="pl-s">"https"</span>
	) {
		<span class="pl-s1"><span class="pl-c1">$</span>server_proto</span> = <span class="pl-s">'https://'</span>;
	} <span class="pl-k">else</span> {
		<span class="pl-s1"><span class="pl-c1">$</span>server_proto</span> = <span class="pl-s">'http://'</span>;
	}
	<span class="pl-en">define</span>(<span class="pl-s">'WP_SITEURL'</span>, <span class="pl-s1"><span class="pl-c1">$</span>server_proto</span> . <span class="pl-s1"><span class="pl-c1">$</span><span class="pl-c1">_SERVER</span></span>[<span class="pl-s">'HTTP_HOST'</span>]);
	<span class="pl-en">define</span>(<span class="pl-s">'WP_HOME'</span>, <span class="pl-s1"><span class="pl-c1">$</span>server_proto</span> . <span class="pl-s1"><span class="pl-c1">$</span><span class="pl-c1">_SERVER</span></span>[<span class="pl-s">'HTTP_HOST'</span>]);
	<span class="pl-en">define</span>(<span class="pl-s">'LOCALTUNNEL_ACTIVE'</span>, <span class="pl-c1">true</span>);
}</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="if(strpos($_SERVER['HTTP_X_ORIGINAL_HOST'], 'ngrok') !== FALSE) {
	if(
		isset($_SERVER['HTTP_X_ORIGINAL_HOST']) &amp;&amp; 
		$_SERVER['HTTP_X_ORIGINAL_HOST'] === &quot;https&quot;
	) {
		$server_proto = 'https://';
	} else {
		$server_proto = 'http://';
	}
	define('WP_SITEURL', $server_proto . $_SERVER['HTTP_HOST']);
	define('WP_HOME', $server_proto . $_SERVER['HTTP_HOST']);
	define('LOCALTUNNEL_ACTIVE', true);
}" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
        </li>
        <li>
            <p dir="auto">Add the following wrapper to a "must use" plugin (ex. "wp-content/mu-plugins/ngrok.php") (also
                from the post) :</p>
            <div class="highlight highlight-text-html-php position-relative overflow-auto">
                <pre><span class="pl-ent">&lt;?php</span>
<span class="pl-k">function</span> <span class="pl-en">change_urls</span>(<span class="pl-s1"><span class="pl-c1">$</span>page_html</span>) {
  <span class="pl-k">if</span>(<span class="pl-en">defined</span>(<span class="pl-s">'LOCALTUNNEL_ACTIVE'</span>) &amp;&amp; <span class="pl-c1">LOCALTUNNEL_ACTIVE</span> === <span class="pl-c1">true</span>) {

    <span class="pl-s1"><span class="pl-c1">$</span>wp_home_url</span> = <span class="pl-en">esc_url</span>(<span class="pl-en">home_url</span>(<span class="pl-s">'/'</span>));
    <span class="pl-s1"><span class="pl-c1">$</span>rel_home_url</span> = <span class="pl-en">wp_make_link_relative</span>(<span class="pl-s1"><span class="pl-c1">$</span>wp_home_url</span>);

    <span class="pl-s1"><span class="pl-c1">$</span>esc_home_url</span> = <span class="pl-en">str_replace</span>(<span class="pl-s">'/'</span>, <span class="pl-s">'\/'</span>, <span class="pl-s1"><span class="pl-c1">$</span>wp_home_url</span>);
    <span class="pl-s1"><span class="pl-c1">$</span>rel_esc_home_url</span> = <span class="pl-en">str_replace</span>(<span class="pl-s">'/'</span>, <span class="pl-s">'\/'</span>, <span class="pl-s1"><span class="pl-c1">$</span>rel_home_url</span>);

    <span class="pl-s1"><span class="pl-c1">$</span>rel_page_html</span> = <span class="pl-en">str_replace</span>(<span class="pl-s1"><span class="pl-c1">$</span>wp_home_url</span>, <span class="pl-s1"><span class="pl-c1">$</span>rel_home_url</span>, <span class="pl-s1"><span class="pl-c1">$</span>page_html</span>);
    <span class="pl-s1"><span class="pl-c1">$</span>esc_page_html</span> = <span class="pl-en">str_replace</span>(<span class="pl-s1"><span class="pl-c1">$</span>esc_home_url</span>, <span class="pl-s1"><span class="pl-c1">$</span>rel_esc_home_url</span>, <span class="pl-s1"><span class="pl-c1">$</span>rel_page_html</span>);

    <span class="pl-k">return</span> <span class="pl-s1"><span class="pl-c1">$</span>esc_page_html</span>;
  }
}

<span class="pl-k">function</span> <span class="pl-en">buffer_start_relative_url</span>() { 
  <span class="pl-k">if</span>(<span class="pl-en">defined</span>(<span class="pl-s">'LOCALTUNNEL_ACTIVE'</span>) &amp;&amp; <span class="pl-c1">LOCALTUNNEL_ACTIVE</span> === <span class="pl-c1">true</span>) {
    <span class="pl-en">ob_start</span>(<span class="pl-s">'change_urls'</span>); 
  }
}
<span class="pl-k">function</span> <span class="pl-en">buffer_end_relative_url</span>() { 
  <span class="pl-k">if</span>(<span class="pl-en">defined</span>(<span class="pl-s">'LOCALTUNNEL_ACTIVE'</span>) &amp;&amp; <span class="pl-c1">LOCALTUNNEL_ACTIVE</span> === <span class="pl-c1">true</span>) {
    @<span class="pl-en">ob_end_flush</span>(); 
  }
}

<span class="pl-en">add_action</span>(<span class="pl-s">'registered_taxonomy'</span>, <span class="pl-s">'buffer_start_relative_url'</span>);
<span class="pl-en">add_action</span>(<span class="pl-s">'shutdown'</span>, <span class="pl-s">'buffer_end_relative_url'</span>);</pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="<?php
function change_urls($page_html) {
  if(defined('LOCALTUNNEL_ACTIVE') &amp;&amp; LOCALTUNNEL_ACTIVE === true) {

    $wp_home_url = esc_url(home_url('/'));
    $rel_home_url = wp_make_link_relative($wp_home_url);

    $esc_home_url = str_replace('/', '\/', $wp_home_url);
    $rel_esc_home_url = str_replace('/', '\/', $rel_home_url);

    $rel_page_html = str_replace($wp_home_url, $rel_home_url, $page_html);
    $esc_page_html = str_replace($esc_home_url, $rel_esc_home_url, $rel_page_html);

    return $esc_page_html;
  }
}

function buffer_start_relative_url() { 
  if(defined('LOCALTUNNEL_ACTIVE') &amp;&amp; LOCALTUNNEL_ACTIVE === true) {
    ob_start('change_urls'); 
  }
}
function buffer_end_relative_url() { 
  if(defined('LOCALTUNNEL_ACTIVE') &amp;&amp; LOCALTUNNEL_ACTIVE === true) {
    @ob_end_flush(); 
  }
}

add_action('registered_taxonomy', 'buffer_start_relative_url');
add_action('shutdown', 'buffer_end_relative_url');" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
    <path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    </clipboard-copy>
  </div></div>
</li>
<li>
<p dir="auto">Launch the server with a header towards your website:</p>
<div class="highlight highlight-source-shell position-relative overflow-auto"><pre>ngrok http -host-header=local.virtualhost.test 80</pre><div class="zeroclipboard-container position-absolute right-0 top-0">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay" data-copy-feedback="Copied!" data-tooltip-direction="w" value="ngrok http -host-header=local.virtualhost.test 80" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
    <path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto">You can add an option to specify the location of the tunnel (it would be "us" by default):
(<a href="https://ngrok.com/docs#global" rel="nofollow">see the list</a>: currently us/eu/ap/au/sa/jp/in):</p>
<div class="snippet-clipboard-content position-relative overflow-auto"><pre><code>ngrok http -host-header=local.virtualhost.test -region jp 80
</code></pre><div class="zeroclipboard-container position-absolute right-0 top-0">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay" data-copy-feedback="Copied!" data-tooltip-direction="w" value="ngrok http -host-header=local.virtualhost.test -region jp 80" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
    <path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    </clipboard-copy>
  </div></div>
</li>
<li>
<p dir="auto">Distribute the public URL displayed in the ngrok console.</p>
</li>
</ol>
<h3 dir="auto"><a id="user-content-fight-spam" class="anchor" aria-hidden="true" href="#fight-spam"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Fight spam</h3>
<p dir="auto">Your use case may not warrant the use of <a href="https://akismet.com/" rel="nofollow">Akismet</a> (which requires a license for commercial use).</p>
<p dir="auto">It could be way simpler to use a blacklist/a blocklist/"disallowed comment keys" (seriously you guys...), such as the <a href="https://github.com/splorp/wordpress-comment-blacklist">wordpress-comment-blacklist</a> by splorp, and to automate its update through one of the suggested plugins on the page.</p>
<h3 dir="auto"><a id="user-content-sidebars" class="anchor" aria-hidden="true" href="#sidebars"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Sidebars</h3>
<p dir="auto">tl;dr for dynamic places in themes, declare the sidebar in functions.php:</p>
<div class="snippet-clipboard-content position-relative overflow-auto"><pre lang="php+HTML"><code>&lt;?php
// Sidebar to simplify content updates
function theme_sidebar_init() {   
   register_sidebar( [
      'name'          =&gt; 'Custom Sidebar',
      'id'            =&gt; 'custom-sidebar',
      'before_widget' =&gt; '',
      'after_widget'  =&gt; '',
      'before_title'  =&gt; '&lt;h5&gt;',
      'after_title'   =&gt; '&lt;/h5&gt;',
   ] );
}
add_action( 'widgets_init', 'theme_sidebar_init' );
?&gt;
</code></pre><div class="zeroclipboard-container position-absolute right-0 top-0">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay" data-copy-feedback="Copied!" data-tooltip-direction="w" value="<?php
// Sidebar to simplify content updates
function theme_sidebar_init() {   
   register_sidebar( [
      'name'          => 'Custom Sidebar',
      'id'            => 'custom-sidebar',
      'before_widget' => '',
      'after_widget'  => '',
      'before_title'  => '<h5>',
      'after_title'   => '</h5>',
   ] );
}
add_action( 'widgets_init', 'theme_sidebar_init' );
?>" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
            <p dir="auto">WARNING: The id of the sidebar should be all lowercase! If not, changes in the "Widgets"
                interface won't get saved.</p>
            <p dir="auto">Then add this in the relevant theme file:</p>
            <div class="snippet-clipboard-content position-relative overflow-auto">
                <pre lang="php+HTML"><code>&lt;?php
if ( is_active_sidebar( 'custom-sidebar' ) ) {
   dynamic_sidebar( 'custom-sidebar' );
} else {
   ?&gt;
	&lt;p class="text"&gt;Sidebar "custom-sidebar" not initialized!&lt;/p&gt;
&lt;?php
}
?&gt;
</code></pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="<?php
if ( is_active_sidebar( 'custom-sidebar' ) ) {
   dynamic_sidebar( 'custom-sidebar' );
} else {
   ?>
	<p class=&quot;text&quot;>Sidebar &quot;custom-sidebar&quot; not initialized!</p>
<?php
}
?>" tabindex="0" role="button">
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
                            <path fill-rule="evenodd"
                                d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z">
                            </path>
                            <path fill-rule="evenodd"
                                d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z">
                            </path>
                        </svg>
                        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16"
                            data-view-component="true"
                            class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
                            <path fill-rule="evenodd"
                                d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z">
                            </path>
                        </svg>
                    </clipboard-copy>
                </div>
            </div>
            <p dir="auto">Then fill the sidebar in Dashboard/Appearance/Widgets.</p>
            <p dir="auto">If you want to hijack things a bit, for instance to insert this sidebar into a theme hook (to
                avoid overriding a file from a parent theme for instance), just do it like this in functions.php
                instead:</p>
            <div class="snippet-clipboard-content position-relative overflow-auto">
                <pre lang="php+HTML"><code>&lt;?php
function theme_sidebar_render() {
 if ( is_active_sidebar( 'custom-sidebar' ) ) {
  dynamic_sidebar( 'custom-sidebar' );
 } else {
  ?&gt;
  &lt;p class="text"&gt;Sidebar "custom-sidebar" not initialized!&lt;/p&gt;
&lt;?php
 }
}
add_action( 'hook_to_insert_into', 'theme_sidebar_render' );
</code></pre>
                <div class="zeroclipboard-container position-absolute right-0 top-0">
                    <clipboard-copy aria-label="Copy"
                        class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay"
                        data-copy-feedback="Copied!" data-tooltip-direction="w" value="<?php
function theme_sidebar_render() {
 if ( is_active_sidebar( 'custom-sidebar' ) ) {
  dynamic_sidebar( 'custom-sidebar' );
 } else {
  ?>
  <p class=&quot;text&quot;>Sidebar &quot;custom-sidebar&quot; not initialized!</p>
<?php
 }
}
add_action( 'hook_to_insert_into', 'theme_sidebar_render' );" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
    <path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto">That you leave or not a warning message depends on you.</p>
<p dir="auto">If you rely on legacy sidebars, you can disable the Gutenberg version by putting this in your functions.php (<a href="https://wptavern.com/gutenberg-8-9-brings-block-based-widgets-out-of-the-experimental-stage" rel="nofollow">source</a>):</p>
<div class="highlight highlight-text-html-php position-relative overflow-auto"><pre><span class="pl-en">remove_theme_support</span>( <span class="pl-s">'widgets-block-editor'</span> );</pre><div class="zeroclipboard-container position-absolute right-0 top-0">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay" data-copy-feedback="Copied!" data-tooltip-direction="w" value="remove_theme_support( 'widgets-block-editor' );" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
    <path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<h3 dir="auto"><a id="user-content-live-templates" class="anchor" aria-hidden="true" href="#live-templates"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Live Templates</h3>
<p dir="auto">When using IDEs that allow for advanced autocompletion, it can be useful to use existing ones or do your own.</p>
<p dir="auto">See Rarst's <a href="https://gist.github.com/Rarst/183c38c499515b6d8609">WordPress Live Templates for PhpStorm</a> for some examples, but you can add templates for every construction not used often enough to justify memorizing it, but still used enough to give a reason to fetch it quickly (like the "add_action()" +  "wp_enqueue_scripts" combo).</p>
<h3 dir="auto"><a id="user-content-stay-up-to-date" class="anchor" aria-hidden="true" href="#stay-up-to-date"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Stay up to date!</h3>
<p dir="auto">Following WordPress-related websites to keep up-to-date with the latest developments can be quite useful. Here's a small list:</p>
<ul dir="auto">
<li><a href="https://wordpress.org/news/" rel="nofollow">Official WordPress.org Blog</a> (developer-oriented)</li>
</ul>
</article>
